
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 03 &#8212; Data Analysis in Finance</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cat.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analysis in Finance</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome!
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_finpyth.html">
   Why Python and finance?
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2_intro.html">
   Python set-up
   <a id="python_set-up">
   </a>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2_0_install.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_1_jupyter.html">
     Jupyter notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_2_vscode.html">
     VS Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_3_markdown.html">
     Markdown
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="3_intro.html">
   CompSci 101: Data and arrays
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="3_0_comp101.html">
     The Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_1_numpy.html">
     Numpy and arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="4_intro.html">
   Importing and using data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="4_0_dataframes.html">
     Data importing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_1_pandas.html">
     pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_2_cleaning_data.html">
     Cleaning our data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_3_eda.html">
     Exploratory data analysis (EDA)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="5_intro.html">
   Data visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="5_0_matplotlib.html">
     matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_1_plotly.html">
     plotly
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_2_seaborn.html">
     seaborn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_financial_ts.html">
   Financial time series
   <a id="financial-time-series">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_comp201.html">
   CompSci 201: OOP and lambdas
   <a id="compsci201">
   </a>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lab_intro.html">
   Our labs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab01.html">
   Lab 01
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab02.html">
   Lab 02
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapters/lab03.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/lab03.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#king-county-housing-this-time-with-graphs">
   King County Housing, This Time With Graphs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1">
   Part 1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-2">
   Part 2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-3">
   Part 3
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-4">
   Part 4
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-5">
   Part 5
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-6">
   Part 6
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-7">
   Part 7
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-8">
   Part 8
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-9">
   Part 9
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-10">
   Part 10
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Lab 03</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#king-county-housing-this-time-with-graphs">
   King County Housing, This Time With Graphs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1">
   Part 1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-2">
   Part 2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-3">
   Part 3
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-4">
   Part 4
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-5">
   Part 5
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-6">
   Part 6
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-7">
   Part 7
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-8">
   Part 8
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-9">
   Part 9
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-10">
   Part 10
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="lab-03">
<h1>Lab 03<a class="headerlink" href="#lab-03" title="Permalink to this headline">¶</a></h1>
<div class="section" id="king-county-housing-this-time-with-graphs">
<h2>King County Housing, This Time With Graphs<a class="headerlink" href="#king-county-housing-this-time-with-graphs" title="Permalink to this headline">¶</a></h2>
<p>In this lab, we are going to import data into Python using <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, clean it up, and make some <strong>graphs</strong>. We’ll again use the housing data from <a class="reference external" href="https://geodacenter.github.io/data-and-lab/KingCounty-HouseSales2015/">King County in Washington State</a>.</p>
<p>Use our online notes to complete our labs. I have my own commentary and links that will help. You can work through the parts below in order.</p>
<p>If you are getting errors and are not sure why, my first suggestion is always to <strong>Restart</strong> the Python kernel, to <strong>Clear All Output</strong>, and run each code cell <strong>one-by-one</strong> from the top.</p>
<p>Let each code cell represent one idea, or output. Take advantage of <strong>Markdown</strong> in your write-up. Use headers and formatting. Here’s a <a class="reference external" href="https://www.markdownguide.org/cheat-sheet/">Markdown cheat sheet</a> that I keep handy. Once you figure out some of the basics, you might not want to go back to Word or Google Docs.</p>
<p>Finally, use <strong>Chapter 7</strong> of our textbook as a resource. I have that chapter and our online notes open as I’m making this lab. I will refer to page numbers. I may also ask you to do figure out how to do something that isn’t exactly in our notes!</p>
</div>
<div class="section" id="part-1">
<h2>Part 1<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h2>
<p>Open up VS Code. Have you set up your class folder yet? I’ve posted a video that will help you figure that part out. Open up that folder under File. You should see it in the <strong>EXPLORER</strong> window pane on the left.</p>
<p>Type <strong>Cmd-Shift-P</strong> (Ctrl-Shift-P in Windows) to open up the command palette. Make sure there’s a little <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> in the search bar that pops up (there should be). Search for <code class="docutils literal notranslate"><span class="pre">Jupyter:</span> <span class="pre">Create</span> <span class="pre">New</span> <span class="pre">Jupyter</span> <span class="pre">Notebook</span></code>. This will open up a blank <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> file. Save this in a new folder in your course folder called <code class="docutils literal notranslate"><span class="pre">lab03</span></code>. Call this file <code class="docutils literal notranslate"><span class="pre">lab03-lastname-firstname</span></code>, where you fill in your name, of course!</p>
</div>
<div class="section" id="part-2">
<h2>Part 2<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h2>
<p>You’ll see a blank code cell, or <strong>cell</strong>, at the top. By default, this is set to Python. See the lower right-hand corner of the cell? Click there and search and select <strong>Markdown</strong>.</p>
<p>Create the following in that top Markdown cell.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lab03</span>
<span class="n">Firstname</span> <span class="n">Lastname</span>
<span class="n">Date</span>
</pre></div>
</div>
<p>As you answer the questions below, use new Markdown cells and headers to separate your answers, as appropriate.</p>
<p>Create your first code cell where you <code class="docutils literal notranslate"><span class="pre">import</span></code> both <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas</span></code> as <code class="docutils literal notranslate"><span class="pre">np</span></code> and <code class="docutils literal notranslate"><span class="pre">pd</span></code>, respectively.</p>
<p>Also include <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">datetime</span> <span class="pre">as</span> <span class="pre">dt</span></code>. The <code class="docutils literal notranslate"><span class="pre">datetime</span></code> library is discussed in the first part of the second DataCamp assignment.</p>
<p>Include <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib.pyplot</span> <span class="pre">as</span> <span class="pre">plt</span></code> and <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">matplotlib</span> <span class="pre">import</span> <span class="pre">style</span></code>. We are going to automatically style our graphs too.</p>
<p>Add a <strong>comment</strong> to that cell calling it <strong>Set-Up</strong>. You can add comments to each code cell to remind yourself what you’re doing. Comments are different from the Markdown that you’re using to write your narrative - they go in the Python cells and use <code class="docutils literal notranslate"><span class="pre">#</span></code>.</p>
</div>
<div class="section" id="part-3">
<h2>Part 3<a class="headerlink" href="#part-3" title="Permalink to this headline">¶</a></h2>
<p>I’ll remind you about this data.</p>
<p>The DataFrame we will be working with will come from <code class="docutils literal notranslate"><span class="pre">kc_house_data.csv</span></code>, which is up in my data folder on <a class="reference external" href="https://github.com/aaiken1/fin-data-analysis-python/tree/main/data">GitHub</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">kc_house_data.csv</span></code> is a CSV file on home sales and characteristics from May 2014 - May 2015 in King County, Washington State. I pulled the file from Kaggle, a data science competition page and a good resource for interesting data sets.</p>
<p>The <strong>url</strong> for the data is <a class="reference external" href="https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/kc_house_data.csv">https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/kc_house_data.csv</a>. Download it directly using <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and put it into a DataFrame called <code class="docutils literal notranslate"><span class="pre">kc</span></code>. There is a variable called <code class="docutils literal notranslate"><span class="pre">id</span></code> in the first column. Make that the index value for the DataFrame. Clean up the <code class="docutils literal notranslate"><span class="pre">date</span></code> variable like last time.</p>
<p>As mentioned in the last lab, we want to think about our question first and then match that to our data. What are we interested in? Can our data answer that question? In practice, just knowing this can be really tough. For example, some questions that this data <strong>might</strong> be able to help us answer:</p>
<ul class="simple">
<li><p>What time period does this data cover?</p></li>
<li><p>How large our houses in King County? What are the typical number of bedrooms or bathrooms?</p></li>
<li><p>What does the distribution of prices look like?</p></li>
<li><p>What types of amenities are present?</p></li>
<li><p>What housing characteristics do people value?</p></li>
<li><p>Can we predict home values?</p></li>
</ul>
<p>Answering these questions would help you figure out what to price a particular home at, for example. Zillow’s <a class="reference external" href="https://www.zillow.com/z/zestimate/">Zestimate pricing model</a> does that. They messed up, though, when trying to use their Zestimate to <a class="reference external" href="https://www.npr.org/2021/11/08/1053689886/ibuyers-zillow-and-the-lemons-problem">actually buy and sell houses</a>. The problem wasn’t their model, per se. They ran into what’s called the <a class="reference external" href="https://en.wikipedia.org/wiki/The_Market_for_Lemons">lemon problem</a>.</p>
<p>Anyone trading, or just buying and selling when the quality of the good is uncertain, has to be aware of this problem! Always ask: Why is this other person trying to sell me this item (e.g. house, car, stock) at this particular price?</p>
<p>A friend of mine has created a company that scores homes and neighborhoods based on their curb-appeal <a class="reference external" href="https://www.wsj.com/articles/selling-your-home-its-whats-on-the-outside-that-counts-11579792560">using machine learning techniques</a> based on photos.</p>
</div>
<div class="section" id="part-4">
<h2>Part 4<a class="headerlink" href="#part-4" title="Permalink to this headline">¶</a></h2>
<p>Let’s start with some sorting, filtering, and variable creation.</p>
<p>Create a new <code class="docutils literal notranslate"><span class="pre">pandas</span></code> DataFrame from our main data file that contains: date (date sold), price, square foot of living space, year built, number of bedrooms, and price per square foot. You’ll need to create two of these variables! Name this DataFrame <code class="docutils literal notranslate"><span class="pre">kc_subset</span></code>.</p>
<p>You can create the year by selecting the <code class="docutils literal notranslate"><span class="pre">date</span></code> column and using the <code class="docutils literal notranslate"><span class="pre">dt.year</span></code> method on it. You can find an example <a class="reference external" href="https://datascienceparichay.com/article/pandas-extract-year-from-datetime-column/">here</a>. We did this in the last lab too.</p>
<p>How can you create a <code class="docutils literal notranslate"><span class="pre">prc_sqr_ft</span></code> variable?</p>
<p>Remember, this new DataFrame will live in memory, but it isn’t stored on your computer until you actually save it using something like <code class="docutils literal notranslate"><span class="pre">to.CSV</span></code>.</p>
<p>Do the following:</p>
<ul class="simple">
<li><p>Show the ten least expensive homes sold in this data set on a price per square foot basis.</p></li>
<li><p>Print the min price.</p></li>
<li><p>Print the max price.</p></li>
</ul>
</div>
<div class="section" id="part-5">
<h2>Part 5<a class="headerlink" href="#part-5" title="Permalink to this headline">¶</a></h2>
<p>What does the distribution of housing prices look like? Let’s create a <strong>histogram</strong> of prices.</p>
<p>It’s good practice to always think about your data. For a histogram, this can mean figuring out the number of bins to use. When you create your histogram include this as an argument: <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">=</span> <span class="pre">(0,</span> <span class="pre">8000000)</span></code>. This will have the x-axis go from 0 to 8,000,000, essentially the range of prices that you should have see above.</p>
<p>Now, how can you figure out the <strong>bin width</strong> and the number of bins to use? If you choose <code class="docutils literal notranslate"><span class="pre">bin</span> <span class="pre">=</span> <span class="pre">8</span></code>, then each bin is going to have a range of 100,000. If you choose <code class="docutils literal notranslate"><span class="pre">bin</span> <span class="pre">=</span> <span class="pre">80</span></code>, then each bin is 10,000 wide. You might ask yourself: “What would be a meaningful difference in housing prices?” $1 is obviously too little, $500,000 might be too high.</p>
<p>Pick a number of bins. Add a title. Remove the legend. Add the following to style the graph automatically: <code class="docutils literal notranslate"><span class="pre">style</span> <span class="pre">=</span> <span class="pre">'seaborn-white'</span></code>.</p>
<p>All of your options will go <strong>inside</strong> of the <code class="docutils literal notranslate"><span class="pre">plot()</span></code> method.</p>
<p>For various settings in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> plot, check out this <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html">documentation</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">pandas</span></code> is using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> functions to style the plots. In fact, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> plot and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> can be used together. To see a list of styles, try: <code class="docutils literal notranslate"><span class="pre">plt.style.available</span></code>. Don’t change the color of the line, etc. when making the plot, or this will override your style choice.</p>
</div>
<div class="section" id="part-6">
<h2>Part 6<a class="headerlink" href="#part-6" title="Permalink to this headline">¶</a></h2>
<p>I didn’t like the x-axis on my graph. It uses scientific notation and just goes 1, 2, 3… up to 8, because the top range was 8,000,000. Let’s do two things now.</p>
<ul class="simple">
<li><p>We can filter our data before plotting it. Try <code class="docutils literal notranslate"><span class="pre">kc_subset[kc_subset['price']</span> <span class="pre">&lt;</span> <span class="pre">1000000].your_plot_code</span></code>, where <code class="docutils literal notranslate"><span class="pre">your_plot_code</span></code> is your histogram code from above. This will filter your data to only homes with prices less than 1,000,000 and then pass that filtered data set to the <code class="docutils literal notranslate"><span class="pre">plot()</span></code> function. Edit the range and bins to something more appropriate. <strong>Do you see spikes in the data? What’s going on there?</strong></p></li>
</ul>
<p>By the way, there’s a term for this kind of programming logic. We are filtering our DataFrame and then <strong>piping</strong> it, or sending it, to the plot function. Basically, there’s some logic to your code that you can read from left to right. And this is all done without changing the actual DataFrame.</p>
<ul class="simple">
<li><p>I still don’t like the x-axis. Let’s use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to make the graph. It’s easier to modify things this way. You can actually use your <code class="docutils literal notranslate"><span class="pre">pandas</span></code> plot and then modify it with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> code. But, we’ll start from scratch. <strong>Make the same histogram again, but use the <code class="docutils literal notranslate"><span class="pre">pyplot</span></code> way discussed in our notes.</strong></p></li>
</ul>
<p>This means using the <code class="docutils literal notranslate"><span class="pre">plt.hist</span></code> function. Use <strong>all of the price data</strong> by plotting <code class="docutils literal notranslate"><span class="pre">kc_subset.price</span></code> or <code class="docutils literal notranslate"><span class="pre">kc_subset['price']</span></code> inside of <code class="docutils literal notranslate"><span class="pre">plt.hist</span></code>. Either pulls the column that you want out of the DataFrame. Add an x-label and a title. Do not include a legend. Style it using <code class="docutils literal notranslate"><span class="pre">plt.style.use('seaborn-white')</span></code>.</p>
<p>Let’s fix that x-axis finally.</p>
<p>Make sure that the last line has a semi-colon.</p>
</div>
<div class="section" id="part-7">
<h2>Part 7<a class="headerlink" href="#part-7" title="Permalink to this headline">¶</a></h2>
<p>Let’s create a simple <strong>categorical variable</strong> from our data. Let’s define a large house as anything greater than 2,500 square feet. Implement the code below to create a new categorical variable called “large_house”.</p>
<p>Let’s use the mutate and ntile functions to create housing categories based on the quantile of living space that the house falls into. This is a less ad hoc way of creating categories. You can use this code below to create the new variable, which will range from 1 to 4, depending on the size of the living space. Note that I am saving over my data set when I create my new variable.</p>
<p>Plot the distribution of sqft_living using a histogram, faceted by sqft_living_4</p>
<p>Which sqft_living_4 quantile category has the highest mean price per square foot? Let’s use group_by for the first time.</p>
</div>
<div class="section" id="part-8">
<h2>Part 8<a class="headerlink" href="#part-8" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="part-9">
<h2>Part 9<a class="headerlink" href="#part-9" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="part-10">
<h2>Part 10<a class="headerlink" href="#part-10" title="Permalink to this headline">¶</a></h2>
<p>Finally, <strong>clear the outputs of all of your cells</strong> using the button at the top of the notebook. Restart your Python kernel. This will clear everything from memory. Then, <strong>Run All</strong>. All of you cells should now run, in order, from top to bottom.</p>
<p>You are done! <strong>Turn in this .ipynb file via Moodle.</strong></p>
<p>You are developing a nice set of tools. You can bring in some raw data, clean it up, summarize it, create new variables, and make some graphs. Once you have the basics down, you can read documentation and look at examples to figure out how to do a lot more.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Prof. Adam Aiken<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>