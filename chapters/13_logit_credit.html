
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>13. Logit models &#8212; Data Analysis in Finance</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="14. Decision Trees" href="14_decision_trees.html" />
    <link rel="prev" title="12. Regression topics" href="12_regression_topics.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cat.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analysis in Finance</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_finpyth.html">
   1. Why Python and finance?
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2_1_intro.html">
   2. Python set-up
   <a id="python_set-up">
   </a>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2_2_git.html">
     2.2. Using Github and Github Codespaces
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_3_install.html">
     2.3. Local Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_4_jupyter.html">
     2.4. Jupyter notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_5_vscode.html">
     2.5. VS Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_6_googlecolab.html">
     2.6. Google Colab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_7_markdown.html">
     2.7. Markdown
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_8_packages.html">
     2.8. Packages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_9_style.html">
     2.9. Code style, PEP8, and linting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_10_using_chatgpt.html">
     2.10. Using ChatGPT
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="3_1_intro.html">
   3. CompSci 101: Types, control, and numpy arrays
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="3_2_comp101.html">
     3.1. The Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_3_numpy.html">
     3.2. Numpy and arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="4_intro.html">
   4. Pandas and data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="4_0_dataframes.html">
     4.1. Data importing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_1_pandas.html">
     4.2. pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_2_cleaning_data.html">
     4.3. Cleaning our data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_3_eda.html">
     4.4. Exploratory data analysis (EDA)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_4_merge_shape.html">
     4.5. Merging and reshaping data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_5_sql.html">
     4.6. Using SQL in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_6_polar.html">
     4.7. polars: A fast, fancy pandas alternative
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="5_intro.html">
   5. Data visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="5_0_seaborn.html">
     5.1. seaborn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_1_matplotlib.html">
     5.2. matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_2_plotly.html">
     5.3. plotly
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_nasdaq_api.html">
   6. Using APIs for Data Imports
   <a id="btc-sim">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_financial_ts.html">
   7. Financial time series
   <a id="financial-time-series">
   </a>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Applications
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="8_port_math.html">
   8. Essential portfolio math
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9_portfolio_opt.html">
   9. Portfolio optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_unsupervised_learning.html">
   10. Unsupervised Learning
   <a id="unsupervised_learning">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_factor_models.html">
   11. Factor models
   <a id="factor_models">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12_regression_topics.html">
   12. Regression topics
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   13. Logit models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14_decision_trees.html">
   14. Decision Trees
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15_svm.html">
   15. SVM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="16_risk_mang.html">
   16. Risk management
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="17_monte_carlo.html">
   17. Monte Carlo and portfolios
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18_options.html">
   18. Option basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="19_reinforcement_learning.html">
   19. Reinforcement Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="20_trading_bt.html">
   20. Trading Strategies and the BT Package
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lab_intro.html">
   Our labs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab01.html">
   Lab 01
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exams
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="exam_intro.html">
   Our Exams
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/13_logit_credit.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/executablebooks/jupyter-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapters/13_logit_credit.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-our-data">
   13.1. Cleaning our data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#linear-regression-with-a-binary-outcome">
   13.2. Linear regression with a binary outcome
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#categorical-variables-again">
     13.2.1. Categorical variables, again
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   13.3. Logit models
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#logit-with-a-discrete-variable">
     13.3.1. Logit with a discrete variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#logit-with-a-continuous-variable">
     13.3.2. Logit with a continuous variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combining-variables-in-a-logit">
     13.3.3. Combining variables in a logit
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Logit models</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-our-data">
   13.1. Cleaning our data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#linear-regression-with-a-binary-outcome">
   13.2. Linear regression with a binary outcome
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#categorical-variables-again">
     13.2.1. Categorical variables, again
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   13.3. Logit models
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#logit-with-a-discrete-variable">
     13.3.1. Logit with a discrete variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#logit-with-a-continuous-variable">
     13.3.2. Logit with a continuous variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combining-variables-in-a-logit">
     13.3.3. Combining variables in a logit
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="logit-models">
<h1><span class="section-number">13. </span>Logit models<a class="headerlink" href="#logit-models" title="Permalink to this headline">#</a></h1>
<p>Linear regressions ((ordinary least squares, or OLS)) tells us about the association between a <strong>dependent</strong>, or Y variable, and a set of <strong>independent</strong>, or X variables. Regression does not tell us anything about one variable causing another or if the correlations we find have any real meaning. It is simply a <a class="reference external" href="https://www.statology.org/linear-regression-assumptions/">statistical technique</a> for finding a linear relationship between two variables. The meaning of that relationship is up to us and the ideas that we are working with. In finance, we usually have an economic model in mind, such as the CAPM, that gives meaning to the relationship that we find.</p>
<p>A <strong>logit regression</strong> does something similar, except that it was developed for when our dependent variable is <strong>binary</strong>, a Yes or No. Logistic regression is a regression model where the response variable Y is <strong>categorical</strong>, as opposed to <strong>continuous</strong>. These types of models are used for <strong>classification</strong>. Why do we need a new model? We want a model that can give us <strong>probabilities</strong> for an event. Regular regression isn’t set up to do this</p>
<p>We will look at a type of data that is commonly used with logit models in finance: credit card default data. This data set has a <strong>binary outcome</strong>. Did the credit card user default? Yes or No? 1 or 0?</p>
<p>This data is from the DataCamp module on credit risk analysis.</p>
<p>We’ll start with some usual set-up, bringing the data in, and taking a peak.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span>

<span class="c1"># Include this to have plots show up in your Jupyter notebook.</span>
<span class="o">%</span><span class="k">matplotlib</span> inline 

<span class="n">loans</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/loan_data.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  
</pre></div>
</div>
</div>
</div>
<p>There are no dates in this data, so no dates to parse. The first column is simply the row number, so I’ll make that my index.</p>
<section id="cleaning-our-data">
<h2><span class="section-number">13.1. </span>Cleaning our data<a class="headerlink" href="#cleaning-our-data" title="Permalink to this headline">#</a></h2>
<p>Let’s get started by just looking at what we have.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 29092 entries, 1 to 29092
Data columns (total 8 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   loan_status     29092 non-null  int64  
 1   loan_amnt       29092 non-null  int64  
 2   int_rate        26316 non-null  float64
 3   grade           29092 non-null  object 
 4   emp_length      28283 non-null  float64
 5   home_ownership  29092 non-null  object 
 6   annual_inc      29092 non-null  float64
 7   age             29092 non-null  int64  
dtypes: float64(3), int64(3), object(2)
memory usage: 2.0+ MB
</pre></div>
</div>
</div>
</div>
<p>We are interested in explaining the <em>loan_status</em> variable. In this data set, <em>loan_status = 1</em> means that the credit card holder has defaulted on their loan. What explains the defaults? The loan amount? Their income? Employment status? Their age?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>loan_status</th>
      <th>loan_amnt</th>
      <th>int_rate</th>
      <th>emp_length</th>
      <th>annual_inc</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>29092.000000</td>
      <td>29092.000000</td>
      <td>26316.000000</td>
      <td>28283.000000</td>
      <td>2.909200e+04</td>
      <td>29092.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.110924</td>
      <td>9593.505947</td>
      <td>11.004567</td>
      <td>6.145282</td>
      <td>6.716883e+04</td>
      <td>27.702117</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.314043</td>
      <td>6323.416157</td>
      <td>3.239012</td>
      <td>6.677632</td>
      <td>6.360652e+04</td>
      <td>6.231927</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>500.000000</td>
      <td>5.420000</td>
      <td>0.000000</td>
      <td>4.000000e+03</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.000000</td>
      <td>5000.000000</td>
      <td>7.900000</td>
      <td>2.000000</td>
      <td>4.000000e+04</td>
      <td>23.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.000000</td>
      <td>8000.000000</td>
      <td>10.990000</td>
      <td>4.000000</td>
      <td>5.642400e+04</td>
      <td>26.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.000000</td>
      <td>12250.000000</td>
      <td>13.470000</td>
      <td>8.000000</td>
      <td>8.000000e+04</td>
      <td>30.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.000000</td>
      <td>35000.000000</td>
      <td>23.220000</td>
      <td>62.000000</td>
      <td>6.000000e+06</td>
      <td>144.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note the units. Loan amount appears to be in dollars. The max of $35,000 reflects the general limit on credit card borrowing - these aren’t mortgages. Interest rate is in percents. The median credit card rate in this sample is 10.99%. Employment length is in years, as is age. Annual income is in dollars. Note the max values for <em>annual_inc</em> and <em>age</em>!</p>
<p>Home ownership and grade do not appear, since they are text variables, not numeric. Grade is some kind of overall measure of loan quality.</p>
<p>Let’s convert the two object variables to <a class="reference external" href="https://www.tutorialspoint.com/python_pandas/python_pandas_categorical_data.htm">categorical variables</a> so that we can deal with them. This code puts all of the <strong>object</strong> columns into a list and then loops through that list to change those columsn to type <strong>category</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_str_obj_cols</span> <span class="o">=</span> <span class="n">loans</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">loans</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">for</span> <span class="n">str_obj_col</span> <span class="ow">in</span> <span class="n">list_str_obj_cols</span><span class="p">:</span>
    <span class="n">loans</span><span class="p">[</span><span class="n">str_obj_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">loans</span><span class="p">[</span><span class="n">str_obj_col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

<span class="n">loans</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>loan_status          int64
loan_amnt            int64
int_rate           float64
grade             category
emp_length         float64
home_ownership    category
annual_inc         float64
age                  int64
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Looks good! I’m now going to add <code class="docutils literal notranslate"><span class="pre">include='all'</span></code> to <code class="docutils literal notranslate"><span class="pre">describe</span></code> to give more information about these categorical variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>loan_status</th>
      <th>loan_amnt</th>
      <th>int_rate</th>
      <th>grade</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>annual_inc</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>29092.000000</td>
      <td>29092.000000</td>
      <td>26316.000000</td>
      <td>29092</td>
      <td>28283.000000</td>
      <td>29092</td>
      <td>2.909200e+04</td>
      <td>29092.000000</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7</td>
      <td>NaN</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>top</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>A</td>
      <td>NaN</td>
      <td>RENT</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>9649</td>
      <td>NaN</td>
      <td>14692</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.110924</td>
      <td>9593.505947</td>
      <td>11.004567</td>
      <td>NaN</td>
      <td>6.145282</td>
      <td>NaN</td>
      <td>6.716883e+04</td>
      <td>27.702117</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.314043</td>
      <td>6323.416157</td>
      <td>3.239012</td>
      <td>NaN</td>
      <td>6.677632</td>
      <td>NaN</td>
      <td>6.360652e+04</td>
      <td>6.231927</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>500.000000</td>
      <td>5.420000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>4.000000e+03</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.000000</td>
      <td>5000.000000</td>
      <td>7.900000</td>
      <td>NaN</td>
      <td>2.000000</td>
      <td>NaN</td>
      <td>4.000000e+04</td>
      <td>23.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.000000</td>
      <td>8000.000000</td>
      <td>10.990000</td>
      <td>NaN</td>
      <td>4.000000</td>
      <td>NaN</td>
      <td>5.642400e+04</td>
      <td>26.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.000000</td>
      <td>12250.000000</td>
      <td>13.470000</td>
      <td>NaN</td>
      <td>8.000000</td>
      <td>NaN</td>
      <td>8.000000e+04</td>
      <td>30.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.000000</td>
      <td>35000.000000</td>
      <td>23.220000</td>
      <td>NaN</td>
      <td>62.000000</td>
      <td>NaN</td>
      <td>6.000000e+06</td>
      <td>144.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This doesn’t show us all of the possible values, but at least we can see the number of values that aren’t missing, as well as a count of unique values. Let’s get a list of possible values for each categorical variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A    9649
B    9329
C    5748
D    3231
E     868
F     211
G      56
Name: grade, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RENT        14692
MORTGAGE    12002
OWN          2301
OTHER          97
Name: home_ownership, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>We can use <code class="docutils literal notranslate"><span class="pre">sns.pairplot</span></code> from the <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> library to get a nice visualization of the relationships between our variables. The diagonal plots show the <strong>denisity plots</strong> for that one variable, but split between <em>loan_status</em>. The off-diagonal plots show the relationship between two of the explanatory (X) variables, but with each observation color-coded based on a third variable, their default status.</p>
<p>Orange means that the person has defaulted.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">loans</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;loan_status&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.PairGrid at 0x157ed3190&gt;
</pre></div>
</div>
<img alt="../_images/13_logit_credit_15_1.png" src="../_images/13_logit_credit_15_1.png" />
</div>
</div>
<p>What jumps out to you? First I see some outliers in age. Someone is over 140 years old in the data! We should drop that observation.</p>
<p>There’s also one individual with a really large annual income. We could also drop that one observation. Outlier observations can overly influence our regression results, though there are techniques for dealing with that.</p>
<p>We can also visually see some of the relationships. Look up and down the <em>int_rate</em> column. Generally, there are more orange dots when the interest rate is higher. Look at the second row, second column. The mean of the smaller density is to the right of the larger one. The smaller one has an orange border and shows the distribution of interest rates on the loans that defaulted.</p>
<p>Look at the third row, second column. There are more orange dots in the higher interest rate, shorter employment length part of the distribution. Look at the fifth row, second column. Loans that defaulted tended to be younger and with higher interest rates.</p>
<p>I am going to clean up two of the outliers - the one for annual income and the one for age. I’ll also drop any row with a missing value.</p>
<p>When done, I’ll re-check my data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span> <span class="o">=</span> <span class="n">loans</span><span class="p">[</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">6000000</span><span class="p">]</span>
<span class="n">loans</span> <span class="o">=</span> <span class="n">loans</span><span class="p">[</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">144</span><span class="p">]</span>

<span class="n">loans</span> <span class="o">=</span> <span class="n">loans</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">loans</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>loan_status</th>
      <th>loan_amnt</th>
      <th>int_rate</th>
      <th>grade</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>annual_inc</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>25570.000000</td>
      <td>25570.000000</td>
      <td>25570.000000</td>
      <td>25570</td>
      <td>25570.000000</td>
      <td>25570</td>
      <td>2.557000e+04</td>
      <td>25570.000000</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7</td>
      <td>NaN</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>top</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>A</td>
      <td>NaN</td>
      <td>RENT</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>8412</td>
      <td>NaN</td>
      <td>13015</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.109190</td>
      <td>9655.154478</td>
      <td>11.034409</td>
      <td>NaN</td>
      <td>6.127219</td>
      <td>NaN</td>
      <td>6.750489e+04</td>
      <td>27.695190</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.311884</td>
      <td>6324.540307</td>
      <td>3.228964</td>
      <td>NaN</td>
      <td>6.653610</td>
      <td>NaN</td>
      <td>5.214082e+04</td>
      <td>6.163362</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>500.000000</td>
      <td>5.420000</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>4.000000e+03</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.000000</td>
      <td>5000.000000</td>
      <td>7.900000</td>
      <td>NaN</td>
      <td>2.000000</td>
      <td>NaN</td>
      <td>4.000000e+04</td>
      <td>23.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.000000</td>
      <td>8000.000000</td>
      <td>10.990000</td>
      <td>NaN</td>
      <td>4.000000</td>
      <td>NaN</td>
      <td>5.700600e+04</td>
      <td>26.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.000000</td>
      <td>12500.000000</td>
      <td>13.480000</td>
      <td>NaN</td>
      <td>8.000000</td>
      <td>NaN</td>
      <td>8.000400e+04</td>
      <td>30.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.000000</td>
      <td>35000.000000</td>
      <td>23.220000</td>
      <td>NaN</td>
      <td>62.000000</td>
      <td>NaN</td>
      <td>2.039784e+06</td>
      <td>84.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>That seems better. Note that each variable now has the same count. Only rows with all of the information are included. This isn’t necessarily best practices when it comes to data. You want to know why your data are missing. You can sometimes fill in the missing data using a variety of methods, as well.</p>
<p>We can also use the basic <code class="docutils literal notranslate"><span class="pre">pd.crosstabs</span></code> function from <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to look at variables across our categorical data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">],</span> <span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>home_ownership</th>
      <th>MORTGAGE</th>
      <th>OTHER</th>
      <th>OWN</th>
      <th>RENT</th>
    </tr>
    <tr>
      <th>loan_status</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9506</td>
      <td>69</td>
      <td>1740</td>
      <td>11463</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1019</td>
      <td>16</td>
      <td>205</td>
      <td>1552</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can <strong>normalize</strong> these counts as well, either over all values, by row, or by column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">],</span> <span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">],</span> <span class="n">normalize</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>home_ownership</th>
      <th>MORTGAGE</th>
      <th>OTHER</th>
      <th>OWN</th>
      <th>RENT</th>
    </tr>
    <tr>
      <th>loan_status</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.371764</td>
      <td>0.002698</td>
      <td>0.068048</td>
      <td>0.448299</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.039851</td>
      <td>0.000626</td>
      <td>0.008017</td>
      <td>0.060696</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This tells us that about 6% of our sample are renters who defaulted. We can try normalizing by column, too.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">],</span> <span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">],</span> <span class="n">normalize</span> <span class="o">=</span> <span class="s1">&#39;columns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>home_ownership</th>
      <th>MORTGAGE</th>
      <th>OTHER</th>
      <th>OWN</th>
      <th>RENT</th>
    </tr>
    <tr>
      <th>loan_status</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.903183</td>
      <td>0.811765</td>
      <td>0.894602</td>
      <td>0.880753</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.096817</td>
      <td>0.188235</td>
      <td>0.105398</td>
      <td>0.119247</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now, each column adds up to 1. 11.9% of all renters in the sample defaulted.</p>
<p>Finally, we can look at the <strong>margins</strong>. These add up values by row and column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">],</span> <span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">],</span> <span class="n">normalize</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">margins</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>home_ownership</th>
      <th>MORTGAGE</th>
      <th>OTHER</th>
      <th>OWN</th>
      <th>RENT</th>
      <th>All</th>
    </tr>
    <tr>
      <th>loan_status</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.371764</td>
      <td>0.002698</td>
      <td>0.068048</td>
      <td>0.448299</td>
      <td>0.89081</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.039851</td>
      <td>0.000626</td>
      <td>0.008017</td>
      <td>0.060696</td>
      <td>0.10919</td>
    </tr>
    <tr>
      <th>All</th>
      <td>0.411615</td>
      <td>0.003324</td>
      <td>0.076066</td>
      <td>0.508995</td>
      <td>1.00000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>So, 10.9% of the full sample defaulted on their loans. About 51% are the full sample are renters. And, about 6% of renters defaulted.</p>
<p>You can play around with the options to get the counts or percents that you want.</p>
</section>
<section id="linear-regression-with-a-binary-outcome">
<h2><span class="section-number">13.2. </span>Linear regression with a binary outcome<a class="headerlink" href="#linear-regression-with-a-binary-outcome" title="Permalink to this headline">#</a></h2>
<p>Now, let’s run a regular linear regression to see what the relationship between loan status (default = 1) and annual income is.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_ols</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s2">&quot;loan_status ~ annual_inc&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_ols</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                            OLS Regression Results                            
==============================================================================
Dep. Variable:            loan_status   R-squared:                       0.003
Model:                            OLS   Adj. R-squared:                  0.003
Method:                 Least Squares   F-statistic:                     67.76
Date:                Mon, 29 Jan 2024   Prob (F-statistic):           1.93e-16
Time:                        13:19:22   Log-Likelihood:                -6455.7
No. Observations:               25570   AIC:                         1.292e+04
Df Residuals:                   25568   BIC:                         1.293e+04
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
Intercept      0.1300      0.003     40.781      0.000       0.124       0.136
annual_inc -3.075e-07   3.74e-08     -8.232      0.000   -3.81e-07   -2.34e-07
==============================================================================
Omnibus:                    12058.535   Durbin-Watson:                   1.999
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            45854.058
Skew:                           2.497   Prob(JB):                         0.00
Kurtosis:                       7.255   Cond. No.                     1.40e+05
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 1.4e+05. This might indicate that there are
strong multicollinearity or other numerical problems.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s2">&quot;annual_inc&quot;</span><span class="p">],</span> <span class="n">loans</span><span class="p">[</span><span class="s2">&quot;loan_status&quot;</span><span class="p">])</span>
<span class="n">sm</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">abline_plot</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">results_ols</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;OLS&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;annual_inc&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;loan_status&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/13_logit_credit_30_0.png" src="../_images/13_logit_credit_30_0.png" />
</div>
</div>
<p>Well, that sure looks strange! Linear regression shows loan status going negative!</p>
<p>Let’s do the same thing with <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>. It’s very easy to add a regression line, like you would in Excel.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;annual_inc&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;loan_status&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">loans</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/13_logit_credit_32_0.png" src="../_images/13_logit_credit_32_0.png" />
</div>
</div>
<p>Yeah, that really doesn’t make sense. <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> lets us also add the fit from a logistic regression, though.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;annual_inc&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;loan_status&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">loans</span><span class="p">,</span> <span class="n">logistic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y_jitter</span><span class="o">=</span><span class="mf">.03</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Probability of default&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/13_logit_credit_34_0.png" src="../_images/13_logit_credit_34_0.png" />
</div>
</div>
<p>OK, that still looks a bit strange, but at least loan status is never below 0!</p>
<section id="categorical-variables-again">
<h3><span class="section-number">13.2.1. </span>Categorical variables, again<a class="headerlink" href="#categorical-variables-again" title="Permalink to this headline">#</a></h3>
<p>We’ll add the other variables to the regression, for completeness. To do this, though, I’m going to take my categorical variables and create new <strong>dummy/indicator variables</strong>. This will take the categories and create new columns. These new columns will take the value of 1 or 0, depending on whether or not that observation is in that category.</p>
<p>I’ll use <a class="reference external" href="https://www.sharpsightlabs.com/blog/pandas-get-dummies/">pd.get_dummies</a> to do this. I then concatenate, or combine, this new set of indicator variables to my original data. The <code class="docutils literal notranslate"><span class="pre">prefix=</span></code> helps me name the new variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">loans</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">],</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;loan_grade&#39;</span><span class="p">)),</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">loans</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">loans</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">loans</span><span class="p">[</span><span class="s1">&#39;home_ownership&#39;</span><span class="p">],</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">)),</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You don’t have to create the numeric indicator variables for the regression models. However, when dealing with indicators, you need to drop one of them from the model. For example, for home ownership, you can’t include <em>home_mortgage</em>, <em>home_rent</em>, <em>home_own</em>, and <em>home_other</em>. You always have to drop one category, or the regression won’t work. This is because the four variables together are <a class="reference external" href="https://www.dummies.com/article/business-careers-money/business/economics/perfect-multicollinearity-and-your-econometric-model-156469/">perfectly multicollinear</a>.</p>
<p>I find it easier sometimes to manipulate the model when I have a distinct indicator variable for my categorical variables. You can also use the <code class="docutils literal notranslate"><span class="pre">treatment=</span></code> option when specifying a variable as categorical directly in the model.</p>
<p>For example, let me run the OLS model with <em>home_ownership</em> included as a categorical variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_ols</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s2">&quot;loan_status ~ annual_inc + home_ownership&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_ols</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                            OLS Regression Results                            
==============================================================================
Dep. Variable:            loan_status   R-squared:                       0.003
Model:                            OLS   Adj. R-squared:                  0.003
Method:                 Least Squares   F-statistic:                     21.92
Date:                Mon, 29 Jan 2024   Prob (F-statistic):           4.44e-18
Time:                        13:19:44   Log-Likelihood:                -6445.8
No. Observations:               25570   AIC:                         1.290e+04
Df Residuals:                   25565   BIC:                         1.294e+04
Df Model:                           4                                         
Covariance Type:            nonrobust                                         
===========================================================================================
                              coef    std err          t      P&gt;|t|      [0.025      0.975]
-------------------------------------------------------------------------------------------
Intercept                   0.1196      0.004     27.261      0.000       0.111       0.128
home_ownership[T.OTHER]     0.0890      0.034      2.625      0.009       0.023       0.155
home_ownership[T.OWN]       0.0023      0.008      0.292      0.770      -0.013       0.017
home_ownership[T.RENT]      0.0153      0.004      3.649      0.000       0.007       0.024
annual_inc              -2.766e-07   3.85e-08     -7.190      0.000   -3.52e-07   -2.01e-07
==============================================================================
Omnibus:                    12043.575   Durbin-Watson:                   2.000
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            45736.120
Skew:                           2.494   Prob(JB):                         0.00
Kurtosis:                       7.249   Cond. No.                     1.49e+06
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 1.49e+06. This might indicate that there are
strong multicollinearity or other numerical problems.
</pre></div>
</div>
</div>
</div>
<p>That worked just fine. But, notice how <em>home_ownership[T.Mortgage]</em> is missing? The model automatically dropped it. So, the other <em>home_ownership</em> values are relative to having a mortgage. This may be just fine, of course! We can interpret the coefficient for renting, for example, as meaning that renters are more likely to default than those that have a mortgage.</p>
<p>Here, I’ll use my indicator variables and run a fully-specified model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loans</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 25570 entries, 1 to 29091
Data columns (total 19 columns):
 #   Column          Non-Null Count  Dtype   
---  ------          --------------  -----   
 0   loan_status     25570 non-null  int64   
 1   loan_amnt       25570 non-null  int64   
 2   int_rate        25570 non-null  float64 
 3   grade           25570 non-null  category
 4   emp_length      25570 non-null  float64 
 5   home_ownership  25570 non-null  category
 6   annual_inc      25570 non-null  float64 
 7   age             25570 non-null  int64   
 8   loan_grade_A    25570 non-null  uint8   
 9   loan_grade_B    25570 non-null  uint8   
 10  loan_grade_C    25570 non-null  uint8   
 11  loan_grade_D    25570 non-null  uint8   
 12  loan_grade_E    25570 non-null  uint8   
 13  loan_grade_F    25570 non-null  uint8   
 14  loan_grade_G    25570 non-null  uint8   
 15  home_MORTGAGE   25570 non-null  uint8   
 16  home_OTHER      25570 non-null  uint8   
 17  home_OWN        25570 non-null  uint8   
 18  home_RENT       25570 non-null  uint8   
dtypes: category(2), float64(3), int64(3), uint8(11)
memory usage: 1.7 MB
</pre></div>
</div>
</div>
</div>
<p>I will exclude the top rated A loan indicator and the indicator for renting. Therefore, the other indicator variables will be relative to the excluded one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_ols</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s2">&quot;loan_status ~ loan_amnt + int_rate + emp_length + annual_inc + age + loan_grade_B + loan_grade_C + loan_grade_D + loan_grade_E + loan_grade_F + loan_grade_G + home_MORTGAGE + home_OWN + home_OTHER&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_ols</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                            OLS Regression Results                            
==============================================================================
Dep. Variable:            loan_status   R-squared:                       0.028
Model:                            OLS   Adj. R-squared:                  0.028
Method:                 Least Squares   F-statistic:                     52.76
Date:                Mon, 29 Jan 2024   Prob (F-statistic):          2.32e-146
Time:                        13:19:44   Log-Likelihood:                -6125.3
No. Observations:               25570   AIC:                         1.228e+04
Df Residuals:                   25555   BIC:                         1.240e+04
Df Model:                          14                                         
Covariance Type:            nonrobust                                         
=================================================================================
                    coef    std err          t      P&gt;|t|      [0.025      0.975]
---------------------------------------------------------------------------------
Intercept         0.0348      0.017      2.033      0.042       0.001       0.068
loan_amnt     -7.349e-07   3.29e-07     -2.236      0.025   -1.38e-06   -9.07e-08
int_rate          0.0083      0.002      4.368      0.000       0.005       0.012
emp_length        0.0006      0.000      1.868      0.062   -2.76e-05       0.001
annual_inc    -3.002e-07   4.04e-08     -7.435      0.000   -3.79e-07   -2.21e-07
age              -0.0006      0.000     -1.808      0.071      -0.001    4.81e-05
loan_grade_B      0.0178      0.008      2.107      0.035       0.001       0.034
loan_grade_C      0.0372      0.013      2.893      0.004       0.012       0.062
loan_grade_D      0.0565      0.017      3.397      0.001       0.024       0.089
loan_grade_E      0.0724      0.022      3.337      0.001       0.030       0.115
loan_grade_F      0.1421      0.031      4.515      0.000       0.080       0.204
loan_grade_G      0.2082      0.049      4.239      0.000       0.112       0.304
home_MORTGAGE    -0.0019      0.004     -0.435      0.663      -0.010       0.007
home_OWN         -0.0061      0.008     -0.819      0.413      -0.021       0.009
home_OTHER        0.0674      0.033      2.014      0.044       0.002       0.133
==============================================================================
Omnibus:                    11579.427   Durbin-Watson:                   2.001
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            42088.653
Skew:                           2.402   Prob(JB):                         0.00
Kurtosis:                       7.054   Cond. No.                     2.47e+06
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 2.47e+06. This might indicate that there are
strong multicollinearity or other numerical problems.
</pre></div>
</div>
</div>
</div>
<p>The interpretation of the signs on the coefficients is relatively straightforward. Larger credit card loans are less likely to default. Why? Lending is <strong>endogenous</strong> - it is chosen by the credit card company. They are more likely to allow larger balances for people less likely to default, all other things equal. Similarily, higher interest rates are related to more defaults. Larger annual incomes are associated with a smaller default rate. Lower loan grades, relative to A, are associated with more defaults. Finally, mortgage vs. renting doesn’t seem to be that different, once you include all of these other variables.</p>
</section>
</section>
<section id="id1">
<h2><span class="section-number">13.3. </span>Logit models<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h2>
<p>OK, so let’s look at a <a class="reference external" href="https://www.andrewvillazon.com/logistic-regression-python-statsmodels/#fitting-a-logistic-regression">logit model</a>. We can look at the signs of the coefficients from the OLS model, but we can’t really interpret much else. Those coefficients are not probabilities.</p>
<p>The true probability of defaulting must fall between 0 and 1. A <strong>logit function</strong>, show below, will satisfy this requirement.</p>
<div class="amsmath math notranslate nohighlight" id="equation-7f6a6b34-d1a5-48cc-b12a-6d14b5599837">
<span class="eqno">(13.1)<a class="headerlink" href="#equation-7f6a6b34-d1a5-48cc-b12a-6d14b5599837" title="Permalink to this equation">#</a></span>\[\begin{align}
{\displaystyle \mathbb{P}(Y=1\mid X) = \frac{1}{1 + e^{-X'\beta}}}
\end{align}\]</div>
<p>The left-hand side is the probability that Y = 1, or, in our case, that a loan is in default, <strong>conditional</strong> on the X variables, or the variables that we are using to predict loan status. The right-hand side is the function that <strong>links</strong> our X variables to the probability that Y = 1.</p>
<p>We will use <code class="docutils literal notranslate"><span class="pre">smf.logit</span></code> to estimate our logit model. This is an example of using a <strong>generalized linear model (GLM)</strong>, a class of models that includes logistic regression. You will also see logits described as <strong>binomial</strong> model.</p>
<p>In the background, GLM uses <strong>maximum likelihood</strong> to fit the model. The basic intuition behind using maximum likelihood to fit a logistic regression model is as follows:</p>
<p>We seek estimates for <span class="math notranslate nohighlight">\(\beta_0\)</span> an <span class="math notranslate nohighlight">\(\beta_1\)</span> that get us a predicted probability of default for each individual, <span class="math notranslate nohighlight">\(p(x_i)\)</span>, that corresponds as closely as possible to the individual’s actual observed default status. In other words, we plug in beta estimates until we get numbers “close” to 1 for those that default and “close” to zero for those that do not. This is done using what is called a <strong>liklihood function</strong>.</p>
<p>Ordinary least squares regression (OLS) actually works in a similar manner, where betas are chosen to minimize the sum of squared residuals (errors).</p>
<p>Essentially, we pick a model that we think can explain our data. This could be OLS, logit, or something else. Then, we find the parameters to plug into that model that give us the best possible predicted values based on minimizing some kind of error function.</p>
<p>Let’s look at a logit with a discrete variable and a continuous X variable separately, in order to better understand how to interpret the output.</p>
<section id="logit-with-a-discrete-variable">
<h3><span class="section-number">13.3.1. </span>Logit with a discrete variable<a class="headerlink" href="#logit-with-a-discrete-variable" title="Permalink to this headline">#</a></h3>
<p>We can start simply, again. This time, I’m going to just use the indicator for whether or not the person rents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_logit</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">logit</span><span class="p">(</span><span class="s2">&quot;loan_status ~ home_RENT&quot;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_logit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully.
         Current function value: 0.344279
         Iterations 6
                           Logit Regression Results                           
==============================================================================
Dep. Variable:            loan_status   No. Observations:                25570
Model:                          Logit   Df Residuals:                    25568
Method:                           MLE   Df Model:                            1
Date:                Mon, 29 Jan 2024   Pseudo R-squ.:                0.001567
Time:                        13:19:45   Log-Likelihood:                -8803.2
converged:                       True   LL-Null:                       -8817.0
Covariance Type:            nonrobust   LLR p-value:                 1.473e-07
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
Intercept     -2.2110      0.030    -73.913      0.000      -2.270      -2.152
home_RENT      0.2114      0.040      5.243      0.000       0.132       0.290
==============================================================================
</pre></div>
</div>
</div>
</div>
<p>We didn’t include renting in the linear model above, as it was the omitted indicator. But, here we can see that renting is associated with higher probability of default <strong>relative to all of the other possibilities</strong> and when not including any other variables in the model.</p>
<p>Also note that we don’t have <em>t</em>-statistics. With logit, you can <em>z</em>-scores. You can look at the p-values to see how you should interpret the score. The hypothesis is the same as in linear regression: can we reject the null hypothesis that this coefficient is zero?</p>
<p>The output from the logit regression is still hard to interpret, though. What does the coefficient on home_RENT of 0.2114 mean? This is a <strong>log odds ratio</strong>. Let’s convert this to an <strong>odds ratio</strong>, which is easier to think about.</p>
<p>An odds ratio is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-e0b4a150-d776-4466-ba6f-c72349f5db58">
<span class="eqno">(13.2)<a class="headerlink" href="#equation-e0b4a150-d776-4466-ba6f-c72349f5db58" title="Permalink to this equation">#</a></span>\[\begin{align}
{\displaystyle \text{odds(success)} = \frac{p}{1-p}}
\end{align}\]</div>
<p>where p = probability of the event happening. So, an 80% chance of happening = .8/.2 = 4:1 odds. 1:1 odds is a 50/50 chance. The logit model gives us the log of this number. So, we can use the inverse of the log, the natural number e, to “undo” the log and get us the odds.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">odds_ratios</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;OR&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">params</span><span class="p">,</span>
        <span class="s2">&quot;Lower CI&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">conf_int</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span>
        <span class="s2">&quot;Upper CI&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">conf_int</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">odds_ratios</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">odds_ratios</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">odds_ratios</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                 OR  Lower CI  Upper CI
Intercept  0.109589  0.103349  0.116206
home_RENT  1.235453  1.141559  1.337070
</pre></div>
</div>
</div>
</div>
<p>What do these numbers mean? If someone rents, this increases the odds of default by about 1.24 versus all other options.</p>
<p>For more about interpreting odds, see <a class="reference external" href="https://stats.idre.ucla.edu/other/mult-pkg/faq/general/faq-how-do-i-interpret-odds-ratios-in-logistic-regression/">here</a>.</p>
<p>Odds ratios are <strong>not probabilities</strong>. Let’s calculate the change in the probability of default as you from 0 to 1 for home_ownership_RENT. The <a class="reference external" href="https://www.statsmodels.org/dev/generated/statsmodels.discrete.discrete_model.DiscreteResults.get_margeff.html">.get_margeff</a> function finds <strong>marginal effects</strong> and let’s us move from odds ratios to probabilities.</p>
<p>Things get a bit complicated here. We have to find the marginal effect <strong>at some point</strong>, like the mean of the variable. This is like in economics, when you find <a class="reference external" href="https://en.wikipedia.org/wiki/Price_elasticity_of_demand">price elasticity</a>. I’m specifying that I have a dummy variable that I want to change and that I want the proportional change in <em>loan_status</em> for a change in <em>home_RENT</em>. This is the <code class="docutils literal notranslate"><span class="pre">eydx</span></code> specification.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_marg_effect</span> <span class="o">=</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">get_margeff</span><span class="p">(</span><span class="n">at</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;eydx&quot;</span><span class="p">,</span> <span class="n">dummy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">p_marg_effect</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>Logit Marginal Effects</caption>
<tr>
  <th>Dep. Variable:</th> <td>loan_status</td>
</tr>
<tr>
  <th>Method:</th>           <td>eydx</td>    
</tr>
<tr>
  <th>At:</th>               <td>mean</td>    
</tr>
</table>
<table class="simpletable">
<tr>
      <th></th>       <th>d(lny)/dx</th>  <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>home_RENT</th> <td>    0.1884</td> <td>    0.036</td> <td>    5.238</td> <td> 0.000</td> <td>    0.118</td> <td>    0.259</td>
</tr>
</table></div></div>
</div>
<p>You can interpret this as “going from not renting to renting is associated with an 18.84% increase <em>loan_status</em>.” You can also specify <code class="docutils literal notranslate"><span class="pre">dydx</span></code>, which is the default.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_marg_effect</span> <span class="o">=</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">get_margeff</span><span class="p">(</span><span class="n">at</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;dydx&quot;</span><span class="p">,</span> <span class="n">dummy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">p_marg_effect</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>Logit Marginal Effects</caption>
<tr>
  <th>Dep. Variable:</th> <td>loan_status</td>
</tr>
<tr>
  <th>Method:</th>           <td>dydx</td>    
</tr>
<tr>
  <th>At:</th>               <td>mean</td>    
</tr>
</table>
<table class="simpletable">
<tr>
      <th></th>         <th>dy/dx</th>    <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>home_RENT</th> <td>    0.0205</td> <td>    0.004</td> <td>    5.260</td> <td> 0.000</td> <td>    0.013</td> <td>    0.028</td>
</tr>
</table></div></div>
</div>
<p>You can interpret this as “going from not renting to renting is associated with an 0.0205 increase in <em>loan_status</em> from the mean of <em>loan_status</em>.”</p>
</section>
<section id="logit-with-a-continuous-variable">
<h3><span class="section-number">13.3.2. </span>Logit with a continuous variable<a class="headerlink" href="#logit-with-a-continuous-variable" title="Permalink to this headline">#</a></h3>
<p>We can also look at a continuous variable, like annual income.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_logit</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">logit</span><span class="p">(</span><span class="s2">&quot;loan_status ~ annual_inc&quot;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_logit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully.
         Current function value: 0.342899
         Iterations 7
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                           Logit Regression Results                           
==============================================================================
Dep. Variable:            loan_status   No. Observations:                25570
Model:                          Logit   Df Residuals:                    25568
Method:                           MLE   Df Model:                            1
Date:                Mon, 29 Jan 2024   Pseudo R-squ.:                0.005569
Time:                        13:19:45   Log-Likelihood:                -8767.9
converged:                       True   LL-Null:                       -8817.0
Covariance Type:            nonrobust   LLR p-value:                 3.765e-23
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
Intercept     -1.7618      0.041    -43.111      0.000      -1.842      -1.682
annual_inc -5.309e-06   5.89e-07     -9.014      0.000   -6.46e-06   -4.15e-06
==============================================================================
</pre></div>
</div>
</div>
</div>
<p>Let’s find our odds ratio for annual income. However, if we do that math exactly like above, we’ll find the incremental odds change for a dollar more in annual income. That’s going to be small! However, it is easy to change the increment for our continuous variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">increment</span> <span class="o">=</span> <span class="mi">10000</span>

<span class="n">odds_ratios</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;OR&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">params</span> <span class="o">*</span> <span class="n">increment</span><span class="p">,</span>
        <span class="s2">&quot;Lower CI&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">conf_int</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span> <span class="n">increment</span><span class="p">,</span>
        <span class="s2">&quot;Upper CI&quot;</span><span class="p">:</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">conf_int</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span> <span class="n">increment</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">odds_ratios</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">odds_ratios</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">odds_ratios</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                  OR  Lower CI  Upper CI
Intercept   0.000000  0.000000  0.000000
annual_inc  0.948297  0.937414  0.959307
</pre></div>
</div>
</div>
</div>
<p>We can read this number as “Increasing income by $10,000 reduces the odds of default by 1-0.948, or 0.052 (5.2%).”</p>
<p>We can also do marginal probabilities. I’ll use the <code class="docutils literal notranslate"><span class="pre">eyex</span></code> method which tells us: If annual income increases by 1% from the mean value, what is the percentage change in the probability of default?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_marg_effect</span> <span class="o">=</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">get_margeff</span><span class="p">(</span><span class="n">at</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;eyex&quot;</span><span class="p">)</span>
<span class="n">p_marg_effect</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>Logit Marginal Effects</caption>
<tr>
  <th>Dep. Variable:</th> <td>loan_status</td>
</tr>
<tr>
  <th>Method:</th>           <td>eyex</td>    
</tr>
<tr>
  <th>At:</th>               <td>mean</td>    
</tr>
</table>
<table class="simpletable">
<tr>
       <th></th>      <th>d(lny)/d(lnx)</th>  <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>annual_inc</th>  <td>   -0.3200</td>   <td>    0.036</td> <td>   -8.976</td> <td> 0.000</td> <td>   -0.390</td> <td>   -0.250</td>
</tr>
</table></div></div>
</div>
<p>If annual income, starting at the mean value, increases by 1%, then the probability of default drops by 0.32%.</p>
</section>
<section id="combining-variables-in-a-logit">
<h3><span class="section-number">13.3.3. </span>Combining variables in a logit<a class="headerlink" href="#combining-variables-in-a-logit" title="Permalink to this headline">#</a></h3>
<p>Let’s look at both annual income and renting together. It’s good to get a feel for how to deal with both discrete and continuous variables.</p>
<p>I’m going to use the <code class="docutils literal notranslate"><span class="pre">C</span></code> categorical method and specify the “treatment”, or omitted, indicator. This is instead of using my dummy variables that I created above. I just want to show you the different ways of doing the same thing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_logit</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">logit</span><span class="p">(</span><span class="s2">&quot;loan_status ~ loan_amnt + int_rate + emp_length + annual_inc + age + C(home_ownership, Treatment(&#39;MORTGAGE&#39;)) + C(grade, Treatment(&#39;A&#39;))&quot;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">loans</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results_logit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully.
         Current function value: 0.330446
         Iterations 7
                           Logit Regression Results                           
==============================================================================
Dep. Variable:            loan_status   No. Observations:                25570
Model:                          Logit   Df Residuals:                    25555
Method:                           MLE   Df Model:                           14
Date:                Mon, 29 Jan 2024   Pseudo R-squ.:                 0.04168
Time:                        13:19:45   Log-Likelihood:                -8449.5
converged:                       True   LL-Null:                       -8817.0
Covariance Type:            nonrobust   LLR p-value:                8.432e-148
=====================================================================================================================
                                                        coef    std err          z      P&gt;|z|      [0.025      0.975]
---------------------------------------------------------------------------------------------------------------------
Intercept                                            -2.9530      0.188    -15.741      0.000      -3.321      -2.585
C(home_ownership, Treatment(&#39;MORTGAGE&#39;))[T.OTHER]     0.5544      0.286      1.942      0.052      -0.005       1.114
C(home_ownership, Treatment(&#39;MORTGAGE&#39;))[T.OWN]      -0.0831      0.083     -0.998      0.318      -0.246       0.080
C(home_ownership, Treatment(&#39;MORTGAGE&#39;))[T.RENT]     -0.0192      0.046     -0.413      0.679      -0.110       0.072
C(grade, Treatment(&#39;A&#39;))[T.B]                         0.3506      0.094      3.717      0.000       0.166       0.536
C(grade, Treatment(&#39;A&#39;))[T.C]                         0.5076      0.137      3.703      0.000       0.239       0.776
C(grade, Treatment(&#39;A&#39;))[T.D]                         0.6084      0.174      3.494      0.000       0.267       0.950
C(grade, Treatment(&#39;A&#39;))[T.E]                         0.6788      0.218      3.110      0.002       0.251       1.107
C(grade, Treatment(&#39;A&#39;))[T.F]                         1.0340      0.285      3.625      0.000       0.475       1.593
C(grade, Treatment(&#39;A&#39;))[T.G]                         1.2744      0.392      3.255      0.001       0.507       2.042
loan_amnt                                         -1.583e-06   3.62e-06     -0.437      0.662   -8.68e-06    5.52e-06
int_rate                                              0.0873      0.020      4.348      0.000       0.048       0.127
emp_length                                            0.0069      0.003      2.176      0.030       0.001       0.013
annual_inc                                         -5.82e-06   6.85e-07     -8.498      0.000   -7.16e-06   -4.48e-06
age                                                  -0.0060      0.003     -1.748      0.080      -0.013       0.001
=====================================================================================================================
</pre></div>
</div>
</div>
</div>
<p>Interpretation is similar. With all of the other variables included, renting doesn’t seem to matter much for the probability of default vs. having a mortgage, since that coefficient is not significant. Remember, having a mortgage is the omitted indicator, so everything is relative to that. Notice how as you move down in loan grade that the probability of default increases, relative to being in the top category, “A”, which was the omitted indicator. Annual income is again very significant and negative.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_marg_effect</span> <span class="o">=</span> <span class="n">results_logit</span><span class="o">.</span><span class="n">get_margeff</span><span class="p">(</span><span class="n">at</span><span class="o">=</span><span class="s1">&#39;overall&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;dydx&quot;</span><span class="p">)</span>
<span class="n">p_marg_effect</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>Logit Marginal Effects</caption>
<tr>
  <th>Dep. Variable:</th> <td>loan_status</td>
</tr>
<tr>
  <th>Method:</th>           <td>dydx</td>    
</tr>
<tr>
  <th>At:</th>              <td>overall</td>  
</tr>
</table>
<table class="simpletable">
<tr>
                          <th></th>                             <th>dy/dx</th>    <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>C(home_ownership, Treatment('MORTGAGE'))[T.OTHER]</th> <td>    0.0523</td> <td>    0.027</td> <td>    1.942</td> <td> 0.052</td> <td>   -0.000</td> <td>    0.105</td>
</tr>
<tr>
  <th>C(home_ownership, Treatment('MORTGAGE'))[T.OWN]</th>   <td>   -0.0078</td> <td>    0.008</td> <td>   -0.998</td> <td> 0.318</td> <td>   -0.023</td> <td>    0.008</td>
</tr>
<tr>
  <th>C(home_ownership, Treatment('MORTGAGE'))[T.RENT]</th>  <td>   -0.0018</td> <td>    0.004</td> <td>   -0.413</td> <td> 0.679</td> <td>   -0.010</td> <td>    0.007</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.B]</th>                     <td>    0.0331</td> <td>    0.009</td> <td>    3.713</td> <td> 0.000</td> <td>    0.016</td> <td>    0.051</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.C]</th>                     <td>    0.0479</td> <td>    0.013</td> <td>    3.700</td> <td> 0.000</td> <td>    0.023</td> <td>    0.073</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.D]</th>                     <td>    0.0574</td> <td>    0.016</td> <td>    3.492</td> <td> 0.000</td> <td>    0.025</td> <td>    0.090</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.E]</th>                     <td>    0.0641</td> <td>    0.021</td> <td>    3.109</td> <td> 0.002</td> <td>    0.024</td> <td>    0.104</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.F]</th>                     <td>    0.0976</td> <td>    0.027</td> <td>    3.625</td> <td> 0.000</td> <td>    0.045</td> <td>    0.150</td>
</tr>
<tr>
  <th>C(grade, Treatment('A'))[T.G]</th>                     <td>    0.1203</td> <td>    0.037</td> <td>    3.255</td> <td> 0.001</td> <td>    0.048</td> <td>    0.193</td>
</tr>
<tr>
  <th>loan_amnt</th>                                         <td>-1.494e-07</td> <td> 3.42e-07</td> <td>   -0.437</td> <td> 0.662</td> <td>-8.19e-07</td> <td> 5.21e-07</td>
</tr>
<tr>
  <th>int_rate</th>                                          <td>    0.0082</td> <td>    0.002</td> <td>    4.347</td> <td> 0.000</td> <td>    0.005</td> <td>    0.012</td>
</tr>
<tr>
  <th>emp_length</th>                                        <td>    0.0006</td> <td>    0.000</td> <td>    2.175</td> <td> 0.030</td> <td> 6.41e-05</td> <td>    0.001</td>
</tr>
<tr>
  <th>annual_inc</th>                                        <td>-5.493e-07</td> <td> 6.48e-08</td> <td>   -8.477</td> <td> 0.000</td> <td>-6.76e-07</td> <td>-4.22e-07</td>
</tr>
<tr>
  <th>age</th>                                               <td>   -0.0006</td> <td>    0.000</td> <td>   -1.748</td> <td> 0.081</td> <td>   -0.001</td> <td> 6.87e-05</td>
</tr>
</table></div></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="12_regression_topics.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">12. </span>Regression topics</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="14_decision_trees.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">14. </span>Decision Trees</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Prof. Adam Aiken<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>