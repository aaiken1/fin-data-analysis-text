
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Final Exam &#8212; Data Analysis in Finance</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Midterm Exam" href="exam01.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cat.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analysis in Finance</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome!
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_finpyth.html">
   Why Python and finance?
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2_intro.html">
   Python set-up
   <a id="python_set-up">
   </a>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2_0_install.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_1_jupyter.html">
     Jupyter notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_2_vscode.html">
     VS Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_3_markdown.html">
     Markdown
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_4_packages.html">
     Packages
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="3_intro.html">
   CompSci 101: Types, control, and numpy arrays
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="3_0_comp101.html">
     The Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_1_numpy.html">
     Numpy and arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="4_intro.html">
   Pandas and data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="4_0_dataframes.html">
     Data importing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_1_pandas.html">
     pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_2_cleaning_data.html">
     Cleaning our data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_3_eda.html">
     Exploratory data analysis (EDA)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_4_merge_shape.html">
     Merging and reshaping data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="5_intro.html">
   Data visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="5_0_matplotlib.html">
     matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_1_plotly.html">
     plotly
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_2_seaborn.html">
     seaborn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_financial_ts.html">
   Financial time series
   <a id="financial-time-series">
   </a>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Applications
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="7_nasdaq_api.html">
   Using NASDAQ BTC data
   <a id="btc-sim">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8_port_math.html">
   Essential portfolio math
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9_portfolio_opt.html">
   Portfolio optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_factor_models.html">
   Factor models
   <a id="factor_models">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_regression_topics.html">
   Regression topics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12_risk_mang.html">
   Risk management
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13_monte_carlo.html">
   Monte Carlo and portfolios
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14_options.html">
   Option basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15_logit_credit.html">
   Logit models
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lab_intro.html">
   Our labs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab01.html">
   Lab 01
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab02.html">
   Lab 02
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab03.html">
   Lab 03
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab04.html">
   Lab 04
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab05.html">
   Lab 05
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab06.html">
   Lab 06
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab07.html">
   Lab 07
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab08.html">
   Lab 08
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exams
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="exam_intro.html">
   Our Exams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exam01.html">
   Midterm Exam
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Final Exam
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapters/final-exam.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/final-exam.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Final Exam
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#academic-honesty-statement">
     Academic Honesty Statement
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-about-grading">
     A note about grading
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exam-name">
     Exam name
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#our-questions">
   Our Questions
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1">
   Part 1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-2">
   Part 2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-3">
   Part 3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-4">
   Part 4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-5">
   Part 5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-6">
   Part 6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-7">
   Part 7
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-8">
   Part 8
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-9">
   Part 9
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-10">
   Part 10
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Final Exam</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Final Exam
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#academic-honesty-statement">
     Academic Honesty Statement
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-about-grading">
     A note about grading
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exam-name">
     Exam name
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#our-questions">
   Our Questions
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1">
   Part 1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-2">
   Part 2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-3">
   Part 3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-4">
   Part 4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-5">
   Part 5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-6">
   Part 6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-7">
   Part 7
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-8">
   Part 8
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-9">
   Part 9
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-10">
   Part 10
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="final-exam">
<h1>Final Exam<a class="headerlink" href="#final-exam" title="Permalink to this headline">¶</a></h1>
<div class="section" id="academic-honesty-statement">
<h2>Academic Honesty Statement<a class="headerlink" href="#academic-honesty-statement" title="Permalink to this headline">¶</a></h2>
<p><strong>THIS IS AN INDIVIDUAL ASSESSMENT. THIS DOCUMENT AND YOUR ANSWERS ARE FOR YOUR EYES ONLY. ANY VIOLATION OF THIS POLICY WILL BE IMMEDIATELY REPORTED TO THE ELON HONOR BOARD.</strong></p>
<p><em>Add the text below to the first cell of your notebook. Replace the underscores below with your name acknowledging that you have read and understood our academic community standard.</em></p>
<p>I, ____________, hereby state that I have not communicated with or gained information in any way from my classmates or anyone other than Professor Aiken during this exam, and that all work is my own. I have properly cited any code that I have used from other sources.</p>
</div>
<div class="section" id="a-note-about-grading">
<h2>A note about grading<a class="headerlink" href="#a-note-about-grading" title="Permalink to this headline">¶</a></h2>
<p>This is an exam, not a lab. <strong>I do not expect everyone to be able to answer every question.</strong> As with any exam, you do not start with 100 points and then subtract. You are starting with zero and then earning credit. For certain questions, I have indicated what you need to do in order to earn full credit.</p>
<p>While code correctness is the most important component of the exam, I will also be looking for well-formatted graphs, proper use of Markdown, thoughtful writing, and easy-to-read code. You need to pay attention to these items to earn full credit.</p>
<p><strong>If you get stuck because you can’t complete the first part of a question</strong>, write commented code (i.e. put a <code class="docutils literal notranslate"><span class="pre">#</span></code> in front of each line of code inside the cell) that does what you <strong>would do</strong> if you have the correct inputs.</p>
<p><strong>There is partial credit.</strong></p>
</div>
<div class="section" id="exam-name">
<h2>Exam name<a class="headerlink" href="#exam-name" title="Permalink to this headline">¶</a></h2>
<p>Open up your folder for this class and create a new <code class="docutils literal notranslate"><span class="pre">exam1</span></code> folder. Save your Jupyter Notebook in the folder. Call this file <code class="docutils literal notranslate"><span class="pre">lastname_firstname_exam1</span></code>.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="our-questions">
<h1>Our Questions<a class="headerlink" href="#our-questions" title="Permalink to this headline">¶</a></h1>
<p>Please answer the following questions in order.</p>
<p><strong>Use Markdown to clearly mark your questions and answers, as well as for formatting any discussion, in order to receive full credit.</strong></p>
<p>Be aware of what <strong>libraries</strong> you need to import.</p>
<p>Remember to <strong>do things in order</strong>. Many errors are caused by running code out of order, or trying to run code twice, where Python is expecting a different input, but, since the code was already run, the input has been altered.</p>
<p><strong>Use code cells to clearly separate tasks</strong>.</p>
<p>When in doubt, <strong>restart and run from the top</strong>.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-1">
<h1>Part 1<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h1>
<p><strong>5 points.</strong> Use <code class="docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">data-reader</span></code> to pull in some stock returns using Yahoo!. Let’s look at these five stocks: MSFT, PG, BA, AXP, and KSS. Pull in daily price data from 2010 through 2021 and calculate discrete returns.  Only keep observations where none of the stocks have missing returns.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>Notice that you can select different <em>levels</em> of this DataFrame, like <em>Adj Close</em>. Check the lab solutions for more.</p>
</div>
<p>Provide a set of summary statistics for the returns. Use Python to show the number of observations and the number of columns. Also, what’s the index for this data?</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-2">
<h1>Part 2<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h1>
<p><strong>10 points.</strong> Let’s try some slicing and dicing.</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> to select only <em>PG</em> and <em>BA</em> returns for 2013. Just show the first 20 results.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> to select the first 10 <em>PG</em> and <em>BA</em> returns. Notice that selecting 10 and showing the first 20 are subtly different.</p></li>
</ul>
<p>Go back to the full set of returns.</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.min</span></code> to create a <strong>new variable</strong> that is the <strong>minimum daily return across all of the stocks</strong>. Call this new variable <em>min_ret</em>. Hint: <code class="docutils literal notranslate"><span class="pre">.min()</span></code> can take an <em>axis</em> argument. First, you tell it what function to use. You tell it the axis you want to apply it to using <code class="docutils literal notranslate"><span class="pre">axis=</span></code>. Do you want to apply the calculation column-wise (e.g. a value of each column) (<code class="docutils literal notranslate"><span class="pre">axis=0</span></code>) or row-wise (e.g. a value for each row) (<code class="docutils literal notranslate"><span class="pre">axis=1</span></code>)? This is a <a class="reference external" href="https://www.statology.org/axis-0-axis-1-python-pandas/">helpful explanation</a>.</p></li>
<li><p>Now, use <code class="docutils literal notranslate"><span class="pre">.aggregate()</span></code> to do the exact same thing, but call this new variable <em>min_ret_2</em>. Hint: <code class="docutils literal notranslate"><span class="pre">.aggregate()</span></code> takes <strong>two</strong> arguments. This first is the function to use. The second is the axis to apply it to.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-3">
<h1>Part 3<a class="headerlink" href="#part-3" title="Permalink to this headline">¶</a></h1>
<p><strong>10 points.</strong> Some more slicing and dicing!</p>
<ul class="simple">
<li><p>Create a new DataFrame with only <em>PG</em> and *BA daily returns where <em>one of the</em> daily returns is negative. You can call this DataFrame <em>pg_ba_negative</em>. This is an example of <strong>filtering</strong>.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">.loc</span></code> to select the columns you want.</p>
</div>
<p>Go back to the main data.</p>
<ul class="simple">
<li><p>Create a new variable called <em>year</em> using the <em>Date</em> index. You can refer to the index as <code class="docutils literal notranslate"><span class="pre">df.index</span></code>, where <code class="docutils literal notranslate"><span class="pre">df</span></code> is whatever you named this DataFrame. You can pull the year <strong>attribute</strong> out of date using <code class="docutils literal notranslate"><span class="pre">.year</span></code> if you have the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> package imported.</p></li>
<li><p>Find the average daily return by year for all of the stocks. Instead of typing in each column/ticker that you want to take the mean of, <strong>use a separate list that contains all of the tickers.</strong></p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>Do you already have a list with the tickers? Check your data import code.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-4">
<h1>Part 4<a class="headerlink" href="#part-4" title="Permalink to this headline">¶</a></h1>
<p><strong>10 points.</strong> Use <code class="docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">plot</span></code> to make a graph of <strong>cumulative returns</strong> for all of the stocks. Remember, these are discrete returns.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>How can you tell if something is <code class="docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">plot</span></code> vs. <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>? <code class="docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">plot</span></code> is applied directly to a DataFrame, like this: <code class="docutils literal notranslate"><span class="pre">df.plot()</span></code>. <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> can be used different ways, but you’ll often see a <code class="docutils literal notranslate"><span class="pre">plt</span></code> or an <code class="docutils literal notranslate"><span class="pre">ax</span></code> involved. <code class="docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">plot</span></code> is using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> under the surface, so you can actually mix and match methods.</p>
</div>
<p>You have some columns in your DataFrame, like <em>year</em> and <em>min_ret</em>, that aren’t going to make sense in this graph. Drop these columns when calculating your cumulative returns. You can subset your main returns DataFrame when doing the calculation using your ticker list. Or, you can create a new DataFrame that only has what you want. Subsetting is easier, though!</p>
<p>What do I mean by <strong>subsetting</strong>? That’s just column selection. You can select the columns you want and work with that, without saving things to a new DataFrame first.</p>
<p>Multiply all of the cumulative returns by 100. Include a title on your graph and change the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> to be 0.7.</p>
<p><strong>Explain what the cumulative returns code you are using does.</strong></p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>Notice how useful this ticker list is. If we change the list at the start of the code, then we don’t need to change anything else - everything should just work, no matter what stocks we selected.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-5">
<h1>Part 5<a class="headerlink" href="#part-5" title="Permalink to this headline">¶</a></h1>
<p><strong>15 points.</strong> I have downloaded some <strong>daily</strong> Fama-French factor data for you. You can find it on my GitHub here: https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/F-F_Research_Data_Factors_daily.CSV</p>
<ul class="simple">
<li><p>Show me the data type of each variable. Notice how <em>Date</em> is an integer? Turn this into an actual date and make it the index. That way, both your returns data and this Fama-French factor data will have a daily date as their index.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>You need to pay attention to the format of the date as integer. Both the DataCamp and our online notes will help with this. Also, make sure that you use <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> when setting the index. Remember, an index in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is just a special column that that let’s us identify observations. In finance, a lot of our data has a date that we want to merge on, so making the date the index is common. We have multi-index data, too, where both a date and a ticker or firm ID are the indices. We don’t have the data organized that way here.</p>
</div>
<ul class="simple">
<li><p>With a “real” date created, <strong>merge</strong> this Fama-French data with the return data, <strong>keeping only the observations that are in your stock data</strong>. Call this new merged DataFrame <em>rets_ff</em>.</p></li>
<li><p>Rename <em>Mkt-RF</em> as <em>market_rf</em>, <em>SMB</em> as <em>smb</em>, and <em>HML</em> as <em>hml</em>.</p></li>
<li><p>Check out the Fama-French variables. Do they look like they are in different units when compared to you stock returns? They are! There’s an <em>implied</em> percent sign. Divide <em>market_rf</em>, <em>smb</em>, and <em>hml</em> by 100. There are many ways to do this. I used <code class="docutils literal notranslate"><span class="pre">.div(100)</span></code>, which you saw a lot in the DataCamp. Make sure that you are saving the result back to that column. I could have also <em>multiplied</em> the stock returns by 100.</p></li>
<li><p>Finally, <strong>run a Fama-French three-factor regression</strong> on the stock of your choice and <strong>interpret the results</strong>. The three Fama-French factors are the market return, the value factor (hml), and the small factor (smb).</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>If you don’t get the returns in the same units, the regression will still work fine and the <em>t</em>-statistics will be identical. But, the coefficients will be off by a factor of 100 in this case.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-6">
<h1>Part 6<a class="headerlink" href="#part-6" title="Permalink to this headline">¶</a></h1>
<p><strong>15 points</strong> Let’s think about the risk of one of these stocks.</p>
<ul class="simple">
<li><p>Print the mean and standard deviation of the daily returns for <em>MSFT</em>.</p></li>
<li><p>Create a <strong>histogram</strong> showing the actual return distribution for <em>MSFT</em>. Use <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to make a plot that is 10x7, with grey bars, and a title and properly labeled x-axis. This is called the <strong>empirical distribution</strong>, since it uses actual returns.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">scipy</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to create a graph that has overlapping <strong>probability density functions</strong> (PDF), where one PDF is a normal distribution assuming the mean and standard deviation of <em>MSFT</em>, while the other is a <em>t</em> distribution, assuming <em>MSFT</em> return characteristics. Again, include a labeled x-axis, a title, and a legend. Change the color of the normal distribution to black and the <em>t</em> distribution to “skyblue”. These are called <strong>theoretical distributions</strong>.</p></li>
</ul>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>When creating theoretical distributions, you’ll need to create an x-axis variable to plot. See our notes for an example.</p>
</div>
<ul class="simple">
<li><p>What’s the 99% <strong>parametric VaR</strong> for <em>MSFT</em>, assuming that their returns are normally distributed? What does this number <strong>tell us</strong>? Crucially, what <strong>doesn’t it tell us</strong>?</p></li>
<li><p>Finally, <strong>explain to me</strong>, without any statistical jargon, the <strong>difference between these distributions</strong>: an empirical distribution, a theoretical normal distribution, and a theoretical <em>t</em> distribution.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-7">
<h1>Part 7<a class="headerlink" href="#part-7" title="Permalink to this headline">¶</a></h1>
<p><strong>15 points</strong> Use <code class="docutils literal notranslate"><span class="pre">scipy</span></code> and that package’s optimizer to find the <strong>max Sharpe portfolio</strong> for these five stocks. You can assume a risk-free rate of zero. We are going to just use the stocks, so it might be easier to create a DataFrame that just has those five stocks in it and work with that. You can also subset, like above.</p>
<ul class="simple">
<li><p><strong>Optimize</strong> using the mean and standard deviation of the <strong>daily</strong> returns. Allow shorting, but don’t let any position be less than -20% of the portfolio.</p></li>
<li><p><strong>Print</strong> the weights. Which stock gets the largest weight? Does that make sense?</p></li>
<li><p>What is the <strong>annualized Sharpe ratio</strong> for this portfolio? You can (approximately) annualize a daily Sharpe like this by multiplying by the square root of 252.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-8">
<h1>Part 8<a class="headerlink" href="#part-8" title="Permalink to this headline">¶</a></h1>
<p><strong>15 points</strong> We are going to end our semester with <strong>even more loan data</strong>. This data set is a bit different, though. It contains information on loans made by the Small Business Administration (SBA). These SBA loans are made by the government and go to firms that might have had a difficult time otherwise accessing credit, in the hope of creating jobs. This data is for the state of California.</p>
<p>You can bring in the data from my Github: https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/loan_data_sba.csv</p>
<ul class="simple">
<li><p>Import this data as a DataFrame called <em>sba</em>.</p></li>
<li><p>Print the number of <strong>missing values</strong> by variable. Notice anything?</p></li>
<li><p>Show a <strong>count for each possible value</strong> of the <em>UrbanRural</em> variable.</p></li>
<li><p>Let’s use a function called <code class="docutils literal notranslate"><span class="pre">np.select</span></code> to match up conditions and outcomes to create a new variable called <em>location</em>. Essentially, if the first condition is met, then the first listed outcome is used to give a new variable that value. And so on…</p></li>
</ul>
<p>Here’s what the logic that we want to do: If <code class="docutils literal notranslate"><span class="pre">UrbanRural</span> <span class="pre">==</span> <span class="pre">0</span></code>, then <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">=</span> <span class="pre">'Rural'</span></code>. If <code class="docutils literal notranslate"><span class="pre">UrbanRural</span> <span class="pre">==</span> <span class="pre">1</span></code>, then <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">=</span> <span class="pre">'Urban'</span></code>. If <code class="docutils literal notranslate"><span class="pre">UrbanRural</span> <span class="pre">==</span> <span class="pre">2</span></code>, then <code class="docutils literal notranslate"><span class="pre">location</span> <span class="pre">=</span> <span class="pre">'Other'</span></code>. We can do this without writing a single If-statement.</p>
<p>How? Take a look at <a class="reference external" href="https://stackoverflow.com/questions/26886653/pandas-create-new-column-based-on-values-from-other-columns-apply-a-function-o">this post on StackOverflow</a>. Go down to the 3rd solution, the one using <code class="docutils literal notranslate"><span class="pre">np.select</span></code> and talking about <strong>vectorization</strong>. Modify this solution to work for our task.</p>
<p>Two things to note. First, the third argument for <code class="docutils literal notranslate"><span class="pre">np.select</span></code> is the default, “What do I put?”, if no condition is met. Make this ‘NA’, for Not Available, rather than ‘Other’, since ‘Other’ is actually a category. Second, note that the author is saving this to a new series. We want to instead create a new variable in the <em>sba</em> DataFrame.</p>
<p>Why am I having you do this? First, modifying a solution you find online is a crucial skill. Second, the idea of vectorization is an important programming concept if you ever need to care about speed. Basically, it has to do with how Python is doing the calculation and avoiding loops.</p>
<ul class="simple">
<li><p>Create a nice looking table that has the number of observations, total dollars, mean loan size, median loan size, and the standard deviation of loan size, where the loan size for the amount of money disbursed (DisbursementGross), grouped by the new <em>location</em> variable. You’ll find sum, mean, median, and standard deviation in the notes. To get a count, use <code class="docutils literal notranslate"><span class="pre">np.size</span></code>.</p></li>
</ul>
<p>This means <strong>creating a table as a DataFrame</strong> and then working with it to style it the way we want. In other words, you’ll want to <strong>save the table as something</strong> in order to change the style.</p>
<p>For formatting, try this code: <code class="docutils literal notranslate"><span class="pre">table.loc[:,</span> <span class="pre">'sum']</span> <span class="pre">=</span> <span class="pre">table['sum'].map('${:,d}'.format)</span></code>. Do you see what it’s doing? We’re picking out <em>sum</em> and using the <code class="docutils literal notranslate"><span class="pre">map</span></code> function to format each number in the column a certain way. This won’t work exactly for the other variables - they are floats, not integers, like <em>sum</em>. You’ll need to change the ‘d’ to ‘f’. You can use ‘${:,0f}’ to get rid of all decimal places. <code class="docutils literal notranslate"><span class="pre">map</span></code> is an example of <strong>vectorization</strong> and just means “apply this function to every item in this column or row”.</p>
<p>Add a caption to the table. Use <code class="docutils literal notranslate"><span class="pre">style.set_caption()</span></code>.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-9">
<h1>Part 9<a class="headerlink" href="#part-9" title="Permalink to this headline">¶</a></h1>
<p><strong>5 points</strong> Tell me something cool that you learned this semester.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="part-10">
<h1>Part 10<a class="headerlink" href="#part-10" title="Permalink to this headline">¶</a></h1>
<p>And that’s it! I hope that this final exam has shown you how much you’ve seen and learned this semester. As I mentioned the first day of class, my main goal was to get you to feel comfortable using your computer and to let you know about a whole other set of tools that are available to you. You have made it over the worst part of the learning curve and are ready to explore more, whether that’s another class, a book to work through, or just trying out other people’s code.</p>
<p>Best of luck if you’re graduating! And, I’ll see you around next year if you aren’t.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="exam01.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Midterm Exam</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Prof. Adam Aiken<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>