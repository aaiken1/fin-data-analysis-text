
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exploratory data analysis (EDA) &#8212; Data Analysis in Finance</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data visualization" href="5_intro.html" />
    <link rel="prev" title="Cleaning our data" href="4_2_cleaning_data.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cat.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analysis in Finance</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome!
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_finpyth.html">
   Why Python and finance?
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2_intro.html">
   Python set-up
   <a id="python_set-up">
   </a>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2_0_install.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_1_jupyter.html">
     Jupyter notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_2_vscode.html">
     VS Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_3_markdown.html">
     Markdown
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Basics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="3_intro.html">
   CompSci 101: Data and arrays
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="3_0_comp101.html">
     The Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3_1_numpy.html">
     Numpy and arrays
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="4_intro.html">
   Importing and using data
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="4_0_dataframes.html">
     Data importing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_1_pandas.html">
     pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4_2_cleaning_data.html">
     Cleaning our data
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Exploratory data analysis (EDA)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="5_intro.html">
   Data visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="5_0_dataviz.html">
     Dataviz design principles
     <a id="data-viz">
     </a>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_1_matplotlib.html">
     matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_2_plotly.html">
     plotly
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5_3_seaborn.html">
     seaborn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_financial_ts.html">
   Financial time series
   <a id="financial-time-series">
   </a>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_comp201.html">
   CompSci 201: OOP and lambdas
   <a id="compsci201">
   </a>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lab_intro.html">
   Our labs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab01.html">
   Lab 01
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lab02.html">
   Lab 02
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapters/4_3_eda.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/chapters/4_3_eda.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#set-up">
   Set-up
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exploring-nc-breweries">
   Exploring NC breweries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#groupby-objects">
   GroupBy objects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pandas-profiling">
   pandas profiling
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Exploratory data analysis (EDA)</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#set-up">
   Set-up
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exploring-nc-breweries">
   Exploring NC breweries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#groupby-objects">
   GroupBy objects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pandas-profiling">
   pandas profiling
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="exploratory-data-analysis-eda">
<h1>Exploratory data analysis (EDA)<a class="headerlink" href="#exploratory-data-analysis-eda" title="Permalink to this headline">¶</a></h1>
<p>Exploratory data analysis, or <strong>EDA</strong>, means just that. We are going look at and summarize our idea. The data cleaning that we’ve already done, the looking for missings and understanding our variables, is actually part of EDA. In these notes, however, we’ll focus on <strong>grouping</strong>, or <strong>aggregating</strong>, and summarizing our data.</p>
<p>This type of data work is sometimes called <strong>split-apply-combine</strong>, where we split, or <strong>group</strong> our data, apply a function (e.g. mean), and then combine the summary statistics back together.</p>
<p>We are starting to <strong>ask questions</strong> of our data. For example,</p>
<ul class="simple">
<li><p>What variables do we have and what are their data types? Are they numeric or text?</p></li>
<li><p>Which variables are <strong>continuous</strong>? Which are <strong>discrete</strong>?</p></li>
<li><p>Are any variables <strong>categorical</strong>? These variables might be either numeric or text.</p></li>
<li><p>Do we have any <strong>datetime</strong> variables?</p></li>
<li><p>How are our variables related to each other?</p></li>
<li><p>How can we <strong>summarize</strong> them?</p></li>
</ul>
<p>We’ll graphically summarize our data in the <a class="reference external" href="#dataviz">next section</a>. We’ll look more at <strong>datetime</strong> variables when we get to our work on <a class="reference external" href="#financial-times-series">financial time series</a>.</p>
<p>We want to eventually be able to open up a new data, see what questions <strong>can be answered</strong>, and then have the tools to actually <strong>answer the questions</strong>. Sometimes we want to ask questions that data can’t answer - we need to recognize when that’s the case too.</p>
<p><a class="reference external" href="https://www.datacamp.com/community/tutorials/exploratory-data-analysis-python">DataCamp</a>, of course, has a tutorial on some EDA ideas, perhaps more related to what people are doing in machine learning.</p>
<p><a class="reference external" href="https://wesmckinney.com/book/data-aggregation.html">Chapter 10</a> of <em>Python for Data Analysis</em> discusses aggregation and summarizing our data.</p>
<p><a class="reference external" href="https://aeturrell.github.io/coding-for-economists/data-exploratory-analysis.html">Exploratory Data Analysis</a> from <em>Coding for Economists</em> has data aggregation and summary examples. That chapter also covers the logic of opening up a data set and seeing what you have to work with. I am following along with a lot of that material in these notes.</p>
<div class="section" id="set-up">
<h2>Set-up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h2>
<p>Let’s bring in some data on NC breweries. We’ll again use my Github URL to download the data directly: <a class="reference external" href="https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/ncbreweries.csv">https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/ncbreweries.csv</a>.</p>
<p>We’ll bring in our usual libraries. I’ll also use <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code>, in case we need to clean anything.</p>
<p>I’ll name the DataFrame <code class="docutils literal notranslate"><span class="pre">nc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set-up</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">janitor</span>

<span class="n">nc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/aaiken1/fin-data-analysis-python/main/data/ncbreweries.csv&#39;</span><span class="p">)</span>
<span class="n">nc</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 251 entries, 0 to 250
Data columns (total 7 columns):
 #   Column      Non-Null Count  Dtype 
---  ------      --------------  ----- 
 0   Name        251 non-null    object
 1   City        251 non-null    object
 2   Type        251 non-null    object
 3   Beer Count  251 non-null    int64 
 4   Est         251 non-null    int64 
 5   Status      251 non-null    object
 6   URL         251 non-null    object
dtypes: int64(2), object(5)
memory usage: 13.9+ KB
</pre></div>
</div>
</div>
</div>
<p>Looks pretty good. I’ll use <code class="docutils literal notranslate"><span class="pre">pyjanitor</span></code> to clean up the variable names and get rid of any spaces and capitalizations. We’re transforming them into something called <strong>snake case</strong>, which gets rid of capital letters and uses “_” as spaces.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">clean_names</span><span class="p">()</span>
<span class="n">nc</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 251 entries, 0 to 250
Data columns (total 7 columns):
 #   Column      Non-Null Count  Dtype 
---  ------      --------------  ----- 
 0   name        251 non-null    object
 1   city        251 non-null    object
 2   type        251 non-null    object
 3   beer_count  251 non-null    int64 
 4   est         251 non-null    int64 
 5   status      251 non-null    object
 6   url         251 non-null    object
dtypes: int64(2), object(5)
memory usage: 13.9+ KB
</pre></div>
</div>
</div>
</div>
<p>See what it did? Let’s take a peak at the first few rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>city</th>
      <th>type</th>
      <th>beer_count</th>
      <th>est</th>
      <th>status</th>
      <th>url</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>217 Brew Works</td>
      <td>Wilson</td>
      <td>Microbrewery</td>
      <td>10</td>
      <td>2017</td>
      <td>Active</td>
      <td>https://www.ratebeer.com//brewers/217-brew-wor...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3rd Rock Brewing Company</td>
      <td>Trenton</td>
      <td>Microbrewery</td>
      <td>12</td>
      <td>2016</td>
      <td>Active</td>
      <td>https://www.ratebeer.com//brewers/3rd-rock-bre...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7 Clans Brewing</td>
      <td>Cherokee</td>
      <td>Client Brewer</td>
      <td>1</td>
      <td>2018</td>
      <td>Active</td>
      <td>https://www.ratebeer.com//brewers/7-clans-brew...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Andrews Brewing Company</td>
      <td>Andrews</td>
      <td>Microbrewery</td>
      <td>18</td>
      <td>2014</td>
      <td>Active</td>
      <td>https://www.ratebeer.com//brewers/andrews-brew...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Angry Troll Brewing</td>
      <td>Elkin</td>
      <td>Microbrewery</td>
      <td>8</td>
      <td>2017</td>
      <td>Active</td>
      <td>https://www.ratebeer.com//brewers/angry-troll-...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to change the data types. For example, let’s get brewery <em>type</em> to be something called a <strong>category</strong>. I’ll also change a few others.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">nc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="n">city</span><span class="o">=</span><span class="n">nc</span><span class="p">[</span><span class="s2">&quot;city&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">nc</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>
    <span class="n">status</span><span class="o">=</span><span class="n">nc</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="o">=</span><span class="n">nc</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">nc</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 251 entries, 0 to 250
Data columns (total 7 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   name        251 non-null    string  
 1   city        251 non-null    string  
 2   type        251 non-null    category
 3   beer_count  251 non-null    int64   
 4   est         251 non-null    int64   
 5   status      251 non-null    category
 6   url         251 non-null    string  
dtypes: category(2), int64(2), string(3)
memory usage: 10.7 KB
</pre></div>
</div>
</div>
</div>
<p>Finally, let’s just check for missing data. Doesn’t seem like we have any from that <code class="docutils literal notranslate"><span class="pre">info()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>name          0
city          0
type          0
beer_count    0
est           0
status        0
url           0
dtype: int64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exploring-nc-breweries">
<h2>Exploring NC breweries<a class="headerlink" href="#exploring-nc-breweries" title="Permalink to this headline">¶</a></h2>
<p>We’ll start with <code class="docutils literal notranslate"><span class="pre">describe()</span></code>. The will give us summary statistics for our numeric variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>beer_count</th>
      <th>est</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>251.000000</td>
      <td>251.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>32.960159</td>
      <td>2012.155378</td>
    </tr>
    <tr>
      <th>std</th>
      <td>43.723385</td>
      <td>8.749158</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1900.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>10.000000</td>
      <td>2011.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>18.000000</td>
      <td>2014.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>38.000000</td>
      <td>2016.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>424.000000</td>
      <td>2018.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Anything stand out to you? The variable <em>est</em> is the year that the brewery was established. The minimum is 1900. That seems very early? Is that right? A beer count of 424 seems high, but could be right.</p>
<p>We can make that table look a little better.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_table</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sum_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>beer_count</th>
      <th>est</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>251.0</td>
      <td>251.0</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>33.0</td>
      <td>2012.2</td>
    </tr>
    <tr>
      <th>std</th>
      <td>43.7</td>
      <td>8.7</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.0</td>
      <td>1900.0</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>10.0</td>
      <td>2011.0</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>18.0</td>
      <td>2014.0</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>38.0</td>
      <td>2016.0</td>
    </tr>
    <tr>
      <th>max</th>
      <td>424.0</td>
      <td>2018.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can flip things around, or <strong>transpose</strong>, the table to make it look better. This is usually how summary statistics are presented.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_table</span> <span class="o">=</span> <span class="n">sum_table</span><span class="o">.</span><span class="n">T</span>
<span class="n">sum_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beer_count</th>
      <td>251.0</td>
      <td>33.0</td>
      <td>43.7</td>
      <td>1.0</td>
      <td>10.0</td>
      <td>18.0</td>
      <td>38.0</td>
      <td>424.0</td>
    </tr>
    <tr>
      <th>est</th>
      <td>251.0</td>
      <td>2012.2</td>
      <td>8.7</td>
      <td>1900.0</td>
      <td>2011.0</td>
      <td>2014.0</td>
      <td>2016.0</td>
      <td>2018.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s look at the variable <em>type</em>. What types of breweries are in our data?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Microbrewery          165
Brewpub/Brewery        41
Brewpub                33
Client Brewer           9
Commercial Brewery      3
Name: type, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Mainly microbreweries. I wonder what type of brewery has the largest number of beers on average? This is where we can start using the idea of <strong>split-apply-combine</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)[</span><span class="s1">&#39;beer_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type
Brewpub               44.939394
Brewpub/Brewery       37.707317
Client Brewer          5.000000
Commercial Brewery    10.666667
Microbrewery          31.315152
Name: beer_count, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>This code is <strong>grouping</strong> our data by <em>type</em>, pulling out <em>beer_count</em>, and calculating the mean.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">.agg</span></code> method to include more than one summary statistic. The <code class="docutils literal notranslate"><span class="pre">np.</span></code> means that the function is being pulled from the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> package. Pay attention to the syntax - there are no <code class="docutils literal notranslate"><span class="pre">()</span></code> after the <code class="docutils literal notranslate"><span class="pre">np.mean</span></code>, <code class="docutils literal notranslate"><span class="pre">np.median</span></code>, and <code class="docutils literal notranslate"><span class="pre">np.std</span></code> functions now, because they are being used inside of the <code class="docutils literal notranslate"><span class="pre">.agg</span></code> function. They are also grouped together with <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</p>
<p>You could also pull multiple columns to summarize, but this data set really only has one numeric variable of interest.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)[</span><span class="s1">&#39;beer_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>median</th>
      <th>std</th>
    </tr>
    <tr>
      <th>type</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Brewpub</th>
      <td>44.9</td>
      <td>21.0</td>
      <td>77.3</td>
    </tr>
    <tr>
      <th>Brewpub/Brewery</th>
      <td>37.7</td>
      <td>28.0</td>
      <td>36.3</td>
    </tr>
    <tr>
      <th>Client Brewer</th>
      <td>5.0</td>
      <td>2.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>Commercial Brewery</th>
      <td>10.7</td>
      <td>9.0</td>
      <td>6.7</td>
    </tr>
    <tr>
      <th>Microbrewery</th>
      <td>31.3</td>
      <td>18.0</td>
      <td>36.6</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>See how I added that <code class="docutils literal notranslate"><span class="pre">round(1)</span></code> to get only one decimal place. You can also make your table and then style it in separate lines. This code will style <strong>just that table</strong>. You can also set global style options that will affect all of your results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_table_group</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)[</span><span class="s1">&#39;beer_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span>

<span class="n">sum_table_group</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_257f7_">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >mean</th>
      <th class="col_heading level0 col1" >median</th>
      <th class="col_heading level0 col2" >std</th>
    </tr>
    <tr>
      <th class="index_name level0" >type</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_257f7_level0_row0" class="row_heading level0 row0" >Brewpub</th>
      <td id="T_257f7_row0_col0" class="data row0 col0" >45</td>
      <td id="T_257f7_row0_col1" class="data row0 col1" >21</td>
      <td id="T_257f7_row0_col2" class="data row0 col2" >77</td>
    </tr>
    <tr>
      <th id="T_257f7_level0_row1" class="row_heading level0 row1" >Brewpub/Brewery</th>
      <td id="T_257f7_row1_col0" class="data row1 col0" >38</td>
      <td id="T_257f7_row1_col1" class="data row1 col1" >28</td>
      <td id="T_257f7_row1_col2" class="data row1 col2" >36</td>
    </tr>
    <tr>
      <th id="T_257f7_level0_row2" class="row_heading level0 row2" >Client Brewer</th>
      <td id="T_257f7_row2_col0" class="data row2 col0" >5</td>
      <td id="T_257f7_row2_col1" class="data row2 col1" >2</td>
      <td id="T_257f7_row2_col2" class="data row2 col2" >7</td>
    </tr>
    <tr>
      <th id="T_257f7_level0_row3" class="row_heading level0 row3" >Commercial Brewery</th>
      <td id="T_257f7_row3_col0" class="data row3 col0" >11</td>
      <td id="T_257f7_row3_col1" class="data row3 col1" >9</td>
      <td id="T_257f7_row3_col2" class="data row3 col2" >7</td>
    </tr>
    <tr>
      <th id="T_257f7_level0_row4" class="row_heading level0 row4" >Microbrewery</th>
      <td id="T_257f7_row4_col0" class="data row4 col0" >31</td>
      <td id="T_257f7_row4_col1" class="data row4 col1" >18</td>
      <td id="T_257f7_row4_col2" class="data row4 col2" >37</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The code above reads from left to right. You do something, have a <code class="docutils literal notranslate"><span class="pre">.</span></code>, do something else, etc. For example, we are taking the DataFrame <code class="docutils literal notranslate"><span class="pre">nc</span></code>, grouping it by <em>type</em>, pulling out <em>beer_count</em>, and then aggregating using three different statistics. I am saving this to a <strong>new DataFrame</strong>, called <code class="docutils literal notranslate"><span class="pre">sum_table_group</span></code>. Finally, I am using <code class="docutils literal notranslate"><span class="pre">style.format</span></code> to change the look at the DataFrame that is being displayed as a table in out notebook.</p>
<p>Let’s look at how to do this using some different syntax. Something more vertical. Note that <code class="docutils literal notranslate"><span class="pre">()</span></code> surrounding all of the code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s1">&#39;beer_count&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="o">.</span><span class="n">style</span>
        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Beer Count by Brewery Type&quot;</span><span class="p">)</span>   
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_8c09d_">
  <caption>Beer Count by Brewery Type</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >beer_count</th>
    </tr>
    <tr>
      <th class="index_name level0" >type</th>
      <th class="blank col0" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_8c09d_level0_row0" class="row_heading level0 row0" >Brewpub</th>
      <td id="T_8c09d_row0_col0" class="data row0 col0" >45</td>
    </tr>
    <tr>
      <th id="T_8c09d_level0_row1" class="row_heading level0 row1" >Brewpub/Brewery</th>
      <td id="T_8c09d_row1_col0" class="data row1 col0" >38</td>
    </tr>
    <tr>
      <th id="T_8c09d_level0_row2" class="row_heading level0 row2" >Client Brewer</th>
      <td id="T_8c09d_row2_col0" class="data row2 col0" >5</td>
    </tr>
    <tr>
      <th id="T_8c09d_level0_row3" class="row_heading level0 row3" >Commercial Brewery</th>
      <td id="T_8c09d_row3_col0" class="data row3 col0" >11</td>
    </tr>
    <tr>
      <th id="T_8c09d_level0_row4" class="row_heading level0 row4" >Microbrewery</th>
      <td id="T_8c09d_row4_col0" class="data row4 col0" >31</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>We are starting with the <code class="docutils literal notranslate"><span class="pre">nc</span></code> DataFrame and grouping by <code class="docutils literal notranslate"><span class="pre">type</span></code>. I am calculating the <code class="docutils literal notranslate"><span class="pre">mean</span></code> of <em>beer_count</em>. This actually creates a <strong>series</strong>, not a DataFrame. You can’t style a series and make it look good in your output. So, I use <code class="docutils literal notranslate"><span class="pre">to.frame()</span></code> to put it back into a DataFrame that can be styled. I then use different style functions on that DataFrame. Both <code class="docutils literal notranslate"><span class="pre">format</span></code> and <code class="docutils literal notranslate"><span class="pre">set_caption</span></code> are functions found as part of <code class="docutils literal notranslate"><span class="pre">style</span></code>.</p>
<p>Here’s another example where I group by two variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s2">&quot;beer_count&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type                status
Brewpub             Active    49.206897
                    Closed    14.000000
Brewpub/Brewery     Active    40.405405
                    Closed    12.750000
Client Brewer       Active     2.857143
                    Closed    12.500000
Commercial Brewery  Active    10.666667
                    Closed          NaN
Microbrewery        Active    33.173333
                    Closed    12.733333
Name: beer_count, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>See how that doesn’t look as good? We need to make it a DataFrame and style it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s2">&quot;beer_count&quot;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
    <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">style</span>
        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Beer Count by Brewery Type and Status&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_db6e8_">
  <caption>Beer Count by Brewery Type and Status</caption>
  <thead>
    <tr>
      <th class="blank" >&nbsp;</th>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >beer_count</th>
    </tr>
    <tr>
      <th class="index_name level0" >type</th>
      <th class="index_name level1" >status</th>
      <th class="blank col0" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_db6e8_level0_row0" class="row_heading level0 row0" rowspan="2">Brewpub</th>
      <th id="T_db6e8_level1_row0" class="row_heading level1 row0" >Active</th>
      <td id="T_db6e8_row0_col0" class="data row0 col0" >49</td>
    </tr>
    <tr>
      <th id="T_db6e8_level1_row1" class="row_heading level1 row1" >Closed</th>
      <td id="T_db6e8_row1_col0" class="data row1 col0" >14</td>
    </tr>
    <tr>
      <th id="T_db6e8_level0_row2" class="row_heading level0 row2" rowspan="2">Brewpub/Brewery</th>
      <th id="T_db6e8_level1_row2" class="row_heading level1 row2" >Active</th>
      <td id="T_db6e8_row2_col0" class="data row2 col0" >40</td>
    </tr>
    <tr>
      <th id="T_db6e8_level1_row3" class="row_heading level1 row3" >Closed</th>
      <td id="T_db6e8_row3_col0" class="data row3 col0" >13</td>
    </tr>
    <tr>
      <th id="T_db6e8_level0_row4" class="row_heading level0 row4" rowspan="2">Client Brewer</th>
      <th id="T_db6e8_level1_row4" class="row_heading level1 row4" >Active</th>
      <td id="T_db6e8_row4_col0" class="data row4 col0" >3</td>
    </tr>
    <tr>
      <th id="T_db6e8_level1_row5" class="row_heading level1 row5" >Closed</th>
      <td id="T_db6e8_row5_col0" class="data row5 col0" >12</td>
    </tr>
    <tr>
      <th id="T_db6e8_level0_row6" class="row_heading level0 row6" rowspan="2">Commercial Brewery</th>
      <th id="T_db6e8_level1_row6" class="row_heading level1 row6" >Active</th>
      <td id="T_db6e8_row6_col0" class="data row6 col0" >11</td>
    </tr>
    <tr>
      <th id="T_db6e8_level1_row7" class="row_heading level1 row7" >Closed</th>
      <td id="T_db6e8_row7_col0" class="data row7 col0" >-</td>
    </tr>
    <tr>
      <th id="T_db6e8_level0_row8" class="row_heading level0 row8" rowspan="2">Microbrewery</th>
      <th id="T_db6e8_level1_row8" class="row_heading level1 row8" >Active</th>
      <td id="T_db6e8_row8_col0" class="data row8 col0" >33</td>
    </tr>
    <tr>
      <th id="T_db6e8_level1_row9" class="row_heading level1 row9" >Closed</th>
      <td id="T_db6e8_row9_col0" class="data row9 col0" >13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>You could have written this code like this too. The first line groups, creates the means, and puts all of this back into a DataFrame. The second line formats the DataFrame.</p>
<p>The summary DataFrame <strong>is our table</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_table_mean</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">])[</span><span class="s1">&#39;beer_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>

<span class="n">sum_table_mean</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Beer Count by Brewery Type and Status&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_d2a56_">
  <caption>Beer Count by Brewery Type and Status</caption>
  <thead>
    <tr>
      <th class="blank" >&nbsp;</th>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >beer_count</th>
    </tr>
    <tr>
      <th class="index_name level0" >type</th>
      <th class="index_name level1" >status</th>
      <th class="blank col0" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_d2a56_level0_row0" class="row_heading level0 row0" rowspan="2">Brewpub</th>
      <th id="T_d2a56_level1_row0" class="row_heading level1 row0" >Active</th>
      <td id="T_d2a56_row0_col0" class="data row0 col0" >49</td>
    </tr>
    <tr>
      <th id="T_d2a56_level1_row1" class="row_heading level1 row1" >Closed</th>
      <td id="T_d2a56_row1_col0" class="data row1 col0" >14</td>
    </tr>
    <tr>
      <th id="T_d2a56_level0_row2" class="row_heading level0 row2" rowspan="2">Brewpub/Brewery</th>
      <th id="T_d2a56_level1_row2" class="row_heading level1 row2" >Active</th>
      <td id="T_d2a56_row2_col0" class="data row2 col0" >40</td>
    </tr>
    <tr>
      <th id="T_d2a56_level1_row3" class="row_heading level1 row3" >Closed</th>
      <td id="T_d2a56_row3_col0" class="data row3 col0" >13</td>
    </tr>
    <tr>
      <th id="T_d2a56_level0_row4" class="row_heading level0 row4" rowspan="2">Client Brewer</th>
      <th id="T_d2a56_level1_row4" class="row_heading level1 row4" >Active</th>
      <td id="T_d2a56_row4_col0" class="data row4 col0" >3</td>
    </tr>
    <tr>
      <th id="T_d2a56_level1_row5" class="row_heading level1 row5" >Closed</th>
      <td id="T_d2a56_row5_col0" class="data row5 col0" >12</td>
    </tr>
    <tr>
      <th id="T_d2a56_level0_row6" class="row_heading level0 row6" rowspan="2">Commercial Brewery</th>
      <th id="T_d2a56_level1_row6" class="row_heading level1 row6" >Active</th>
      <td id="T_d2a56_row6_col0" class="data row6 col0" >11</td>
    </tr>
    <tr>
      <th id="T_d2a56_level1_row7" class="row_heading level1 row7" >Closed</th>
      <td id="T_d2a56_row7_col0" class="data row7 col0" >-</td>
    </tr>
    <tr>
      <th id="T_d2a56_level0_row8" class="row_heading level0 row8" rowspan="2">Microbrewery</th>
      <th id="T_d2a56_level1_row8" class="row_heading level1 row8" >Active</th>
      <td id="T_d2a56_row8_col0" class="data row8 col0" >33</td>
    </tr>
    <tr>
      <th id="T_d2a56_level1_row9" class="row_heading level1 row9" >Closed</th>
      <td id="T_d2a56_row9_col0" class="data row9 col0" >13</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="groupby-objects">
<h2>GroupBy objects<a class="headerlink" href="#groupby-objects" title="Permalink to this headline">¶</a></h2>
<p>We’ve been splitting our data into groups. Let’s look at <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> objects. These are created by the <code class="docutils literal notranslate"><span class="pre">groupby</span></code> function.</p>
</div>
<div class="section" id="pandas-profiling">
<h2>pandas profiling<a class="headerlink" href="#pandas-profiling" title="Permalink to this headline">¶</a></h2>
<p>We can install <code class="docutils literal notranslate"><span class="pre">pandas-profiling</span></code> via Anaconda. To use this package, you’ll need to type the following in the terminal (Mac) or command prompt (Windows). You’ll need to restart VS Code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">pandas</span><span class="o">-</span><span class="n">profiling</span>
</pre></div>
</div>
<p>You can <a class="reference external" href="https://github.com/pandas-profiling/pandas-profiling">read all about it on their Github page</a>. It’s ridiculous what it can do.</p>
<p>Let’s add the <code class="docutils literal notranslate"><span class="pre">import</span></code> needed to bring <code class="docutils literal notranslate"><span class="pre">ProfileReport</span></code> from <code class="docutils literal notranslate"><span class="pre">pandas_profiling</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas_profiling</span> <span class="kn">import</span> <span class="n">ProfileReport</span>
</pre></div>
</div>
</div>
</div>
<p>This will create the report.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#profile = ProfileReport(uw, title=&quot;Pandas Profiling Report for NC Brewery Data&quot;)</span>
</pre></div>
</div>
</div>
</div>
<p>We can now view the report in a Jupyter widget. It will take a couple of minutes to summarize everything.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#profile.to_widgets()</span>
</pre></div>
</div>
</div>
</div>
<p>You can also create an HTML file. Using the code below, the file will end up in the same folder as your <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> notebook. I’ve commented it out so that it doesn’t run and create large file everytime.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#profile.to_file(&quot;nc_profile.html&quot;)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="4_2_cleaning_data.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Cleaning our data</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="5_intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data visualization</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Prof. Adam Aiken<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>